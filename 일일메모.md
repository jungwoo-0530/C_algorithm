1월 4주

-  로봇청소기(14503)
-  [2020 KAKAO BLIND RECRUITMENT](https://programmers.co.kr/learn/challenges) - 문자열 압축





토요일날 - https://programmers.co.kr/learn/courses/30/lessons/60059, https://ansohxxn.github.io/programmers/82/ 풀기.

-----------------------------

순서가 있는 큰 수

- 프로그래머스 큰수 만들기(그리디알고리즘)

  - ```c++
    string solution(string number, int k) {
        string answer = "";
    
        int maxIdx = 0;
        int start = 0;
        char max = ' ';
        for(int i = 0; i < number.size() - k; i++){
            
            max = number[start];
            maxIdx = start;
            
            for(int j = start; j <= i+k; j++){
                if(number[j] > max)
                {
                    maxIdx = j;
                    max = number[j];
                }
            }
            answer += max;
            start = maxIdx + 1;
        }
        return answer;
    }
    ```

    

순서가 없는 큰 수(프로그래머스 )



C++

1. Set(기둥과 보 설치)

- 중복 없음.

set은 for(auto a : Set){
}을 사용해서 loop

Set<int>a

a.find(20) ->  a.end()와 같다면 존재하지 않음.

```c++
set<vector<int>> building
  
//set 순회.
for(auto build : building)
{       int x = build[0];
        int y = build[1];
        int a = build[2];
 }

//지우기
vector<int> v
building.erase(v);

//삽입
building.insert(v);

//중복확인.
auto flag = building.insert(v);
if(flag.second == false)
{
  //중복.
}
set<int> b;
//해당 인덱스 선택.
//1번
auto iter = b.begin();
iter++
int temp = *iter;
//2번
for(auto iter : b)
{
  temp = iter;
}


```

vector

2. vector



```c++
/////////////초기화
//1. vector<int> vec = { -1,-1,-1 }; 000으로 초기화 3개.
vector<int> vec(3);

//2. -1 -1 -1로 초기화
vector<int> vec(3,-1);
//3. 2차원 벡터
vector<vector<int>> vec(3, vector<int>(3,-1));



//
vector<int> vec = {1,2,3,4};
//2차원 배열로 [3][4]
vector<int>pred[3] = { {1,2,3,4}, {5,6,7,8}, {9,10,11,12} };

/////////벡터 복사 방법
//1
vector<int> a;
vector<int> b = a;

//2
vector<int> a;
vector<int> b;
a = b;

//3
vector<int>a;
vector<int>b(a.begin(), a.end());

```



```c++
vector<vector<pair<bool,bool>>>map(n, vector<pair<bool, bool> >(n, make_pair(false,false)));

map[y][x].first = false;
```

```c++
vector<vector<int> > answer;
//지우기
if(answer[j][0] == x && answer[j][1] == y && answer[j][2] == 1)
                    {
                        
                        answer.erase(answer.begin()+j);
                    
               
                    }

//지우기


//정렬
sort(answer.begin(), answer.end());

//삽입
//1.
vector<int>temp{x,y,build_frame[i][2]};
answer.push_back(temp);

//2.

```



3. map

- 중복x
- 기본적으로 key에 대해서 오름차순(작은 수가 제일 앞으로 옴)
- key 기준으로 내림차순으로 하고 싶다면 map선언시  greater<int>
- value 기준으로 정렬하고 싶다면 https://unluckyjung.github.io/cpp/2020/05/07/Sort_map_by_value/
- insert로 중복된 key값을 넣으면 무시되고
- [] 로 중복된 key값을 넣으면 값이 대체된다.
- Binary Search Tree로 탐색 시간 복잡도는 O(log n)

```c++
map<key,value> a;

//초기화
//1. 한개.
map<string, int>c = {{"jungwoo", 1}};
//2. 두개.
map<string, int>c = {{"jungwoo", 1}, {"sunwoo", 2}};


//삽입
a[key] = value;

//순회
for(int i = 0; i < a.size(); i++){
  cout << a[i]; // value 출력.
}

//삽입
//1.
map<key, set<string>>b;
b[key].insert(string);
//2.
map<string, vector<int>>f;
     f["jungwoo"].push_back(1);
     f["jungwoo"].push_back(2);
     f["jung"].push_back(3);
     f["jung"].push_back(4);
     
     for(auto a : f)
     {
          for(auto b : a.second)
          {
               cout << a.first << b << "\n";
          }
     }
//iter의 first(key), second(value)
//map의 value가 vector나 그런 것도 iter.second로 접근 가능.
for(auto iter : a)
{
  cout << "key:" << iter.first << "value:" << iter.second; 
}


```



---------------------------------------------------------------------------

bfs시 한칸이 이동한다?  구조체 사용x

bfs시 여러칸이 이동한다? 또한 여러개를 저장해야할때? 구조체 사용

```c++
Struct Robot{
	int x;
	int y;
	int time;
	int dir;
	Robot(int a, int b, int c, int d)
	{
		x = a;
		y = b;
		time = c;
		dir = d;
	}
}

...
  
  Queue<Robot>q;
q.push(Robot(x,y,time,dir));
```



또한 bfs 할 때, 새로운 좌표에서로 갈 수 있는지 확인하는 check()함수 만들어주기.

```c++
int nDir = (dir + 1) % 4 // 4방향을 90도회전시켜서 방향을 잡음.
//그래서 이 값과 dx,dy를 연동해서 새로운 방향을 인덱스로 이동할 dx dy를 구함.
  int nx = x + dx[nDir];

//또한 4방향에 따라서 visit을 구하고 싶다면.
bool visit[100][100][4] = {false,}로 한다.
```



-------------------------------------

### Prefix Sum(누적합)-https://tech.kakao.com/2022/01/14/2022-kakao-recruitment-round-1/

- x0, x1 … xN까지 수가 있을 때 

  - y0=x0, y1=x0+x1 … yN=x0+x1+…+xN처럼 해당 N까지의 합을 의미합니다.

  - ```
    y0 = x0
    y1 = x0 + x1
    y2 = x0 + x1 + x2
    ...
    yN = x0 + x1 + ... + xN
    ```

  - 매번 요청이 올때마다 미리 구해놓은 sum배열을 이용해 값을 바로 반환합니다.(O(n))

  - ```c++
    #include <cstdio>
    
    #define MAX_N 100001
    #define MAX_M 100001
    
    using namespace std;
    
    int value[MAX_N];
    int sum[MAX_N];
    
    int main(){
    
        int N, M;
    
        scanf("%d %d", &N, &M);
    
        for(int i = 1; i <= N; ++i){
            scanf("%d", &value[i]);
            sum[i] = sum[i-1] + value[i];
        }
    
        while(M--){
            int from, to;
            scanf("%d %d", &from, &to);
            printf("%d\n", sum[to] - sum[from - 1] );
        }
    
    
        return 0;
    }
    ```

    

  - 

### DP(다이나믹 프로그래밍)





----------------------------------------------

### 문자열 자르기

```c++
//인덱스로 자르기.
#include<string>

string a = "0123456";

string temp = a.substr(3,2); // temp = 34

//공백 또는 특수문자 등등으로 자르기.
#include <sstream>
string str = "jung woo";
istringstream ss(str);
string stringBuffer;
while(getline(ss, stringBuffer, ' ')){
  cout << stringBuffer;
}

//이렇게도 가능. 공백으로 자르기.
string a = "10:11 1234 IN";

stringstream ss;

ss.str(a);

string time;
string number;
string status;
ss >> time >> number >> status;
ss.clear();


```



### String to int

```c++
#include<string>
int i = stoi(str);
```





```c++
map<string, int>genresRank;
     map<string, vector<pair<int,int>>> temp;
     
     for(int i = 0; i<genres.size(); i++)
     {
          auto a  = genresRank.find(genres[i]);
          if(a != genresRank.end())//값이 이미 있을떄
          {
               int tem = a->second;
               a->second = tem+plays[i];
          }
          else{
               genresRank[genres[i]] = plays[i];
          }
          
          temp[genres[i]].push_back(make_pair(i, plays[i]));
     }
```



### Map Sort

1. key 기준

- 생성자에서 greater.. 등을 사용.

1. value 기준.

- map을 vector로 변경 후, vector를 sort.

```c++
int main(){
     
     map<string, int> map1;
     map<int, int> map2;
     map<string, map<int,int>> map3;
     
     map1["A"] = 1;
     map1["B"] = 2;
     map1["C"] = 2;
     map1["D"] = 4;
     map1["E"] = 5;
     
     vector<pair<string,int>> vec( map1.begin(), map1.end() );

     sort(vec.begin(), vec.end(), cmp1);
     
     for(auto m1 : vec)
     {
          cout << m1.first << " " << m1.second << endl;
     }
     return 0;
     
     
}
```



cmp함수는 크레센도 처럼 <으로하면 점점 커지는 내림차순, >으로하면 점점 작아지게(오름차순)

```c++
bool cmp1(pair<string, int> a, pair<string, int> b) {

     if(a.second == b.second)
          return a.first > b.first;
     return a.second < b.second;
}
```

second는 내림차순, first는 오름차순(second가 같을때.)

<img src="/Users/jungwoo/Desktop/dev/img/image-20220127042034446.png" alt="image-20220127042034446" style="zoom:50%;" />

```c++
bool cmp1(pair<string, int> a, pair<string, int> b) {

     if(a.second == b.second)
          return a.first < b.first;
     return a.second < b.second;
}
```

second는 내림차순, first는 내림차순(second가 같을때.)

<img src="/Users/jungwoo/Desktop/dev/img/image-20220127042126134.png" alt="image-20220127042126134" style="zoom:50%;" />





정렬전.

```c++
int main(){
     
     
     map<string, map<string,int>> map3;
     
     
     
     map3["A"]["a"] = 3;
     map3["A"]["b"] = 1;
     map3["A"]["c"] = 2;
     map3["B"]["a"] = 2;
     map3["B"]["b"] = 3;
     map3["C"]["a"] = 5;
     map3["D"]["a"] = 46;
     map3["E"]["a"] = 5;
     
     for(auto a : map3)
     {
          cout << a.first <<endl;
          for(auto b : a.second)
          {
               cout << b.first << " : " << b.second << endl;
          }
          cout << endl;
     }
     
     
     
     return 0;
     
     
}
```

<img src="/Users/jungwoo/Desktop/dev/img/image-20220127040816112.png" alt="image-20220127040816112" style="zoom:50%;" />

정렬후.

```c++
     for(auto a : map3)
     {
          cout << a.first <<endl;
          vector<pair<string,int>> vec1(a.second.begin(), a.second.end());
          sort(vec1.begin(), vec1.end(), cmp1);
          for(auto b : vec1)
          {
               cout << b.first << " : " << b.second << endl;
          }
          cout << endl;
     }
```



```c++
bool cmp1(pair<string, int> a, pair<string, int> b) {

     if(a.second == b.second)
          return a.first < b.first;
     return a.second < b.second;
}
```



<img src="/Users/jungwoo/Desktop/dev/img/image-20220127041016144.png" alt="image-20220127041016144" style="zoom:50%;" />



- 참고로 vector를 sort할 때, cmp 함수 대신, greater, less 사용가능.







-----------------------------------------------------------------------------

1. CS공부

2. 스프링 프로젝트
   1. Rest Api
   2. 기본
3. 코테
   1. C++
   2. JAVA?





---------------------------------------------------------------

DP

top-down 방식으로 풀면 재귀함수를 사용하면 될 것 같습니다. 

DP문제에서 보통 top-down방식은 재귀, buttom-up방식은 반복문을 사용합니다.

- 프로그래머스 [정수삼각형](https://programmers.co.kr/learn/courses/30/lessons/43105?language=cpp)

  - <img src="/Users/jungwoo/Desktop/dev/img/image-20220202040914504.png" alt="image-20220202040914504" style="zoom:50%;" />

  - top-down방식으로 재귀를 사용할 수 있아.

  - 위 사진과 같이 작은 삼각형으로 생각하고 자식 노드 중 큰 값을 부모노드와 더해서 계산.

  - ```c++
    return dp[row][col] = dp[row][col] + max(recursive(row+1,col), dfs(row+1,col+1));
    ```

  - 위 코드를 보면 맨 처음 `dp[0][0]`을 찾아야 하므로 아래로 내려가면서 계속 작은 삼각형의 부모노드를 업데이트해야한다.

  - 저 recursive 함수에 다음과 같은 dp알고리즘을 주어서 이미 계산한 것은 계산하지 않도록 한다.

  - `if (dp[row][col] > 0) return dp[row][col];`

  - 즉 프로그램상 계산 순서는 맨 아래 삼각형 4개를 먼저 계산하고 2 7 4 4(부모 노드들)이 dp 배열에 업데이트 된다.



단순 dfs

```
row0col0
row1col0
row2col0
row3col0
row4col0
row4col1
row3col1
row4col1
row4col2
row2col1
row3col1
row4col1
row4col2
row3col2
row4col2
row4col3
row1col1
row2col1
row3col1
row4col1
row4col2
row3col2
row4col2
row4col3
row2col2
row3col2
row4col2
row4col3
row3col3
row4col3
row4col4
```

dp 사용한 것

```
row0col0
row1col0
row2col0
row3col0
row4col0
row5col0
row5col1
row4col1
row5col1
row5col2
row3col1
row4col1
dp : row4col1
row4col2
row5col2
row5col3
row2col1
row3col1
dp : row3col1
row3col2
row4col2
dp : row4col2
row4col3
row5col3
row5col4
row1col1
row2col1
dp : row2col1
row2col2
row3col2
dp : row3col2
row3col3
row4col3
dp : row4col3
row4col4
row5col4
row5col5
```



- <img src="/Users/jungwoo/Desktop/dev/img/image-20220202044537355.png" alt="image-20220202044537355" style="zoom:50%;" />

- 내가 맨 dp없이 한 dfs는 위와 같은 모양으로 계속 더하고 탐색하면서 최고 밑단에서 결과를 도출한다.
- 이렇게 한다면 결과는 같이 나온다. 그러나 표시한 곳에서 8 -> 7 -> 5 -> 2 계산을 한 후, 1 -> 7 -> 5 -> 2라는 중복 적인 계산이 발생한다.
- <img src="/Users/jungwoo/Desktop/dev/img/image-20220202045404617.png" alt="image-20220202045404617" style="zoom:50%;" />
- dp를 사용한다면 1에서 7로 갈때, 계산한 값을 사용하므로 그 밑에 7번 노드에 자식 5, 2를 중복으로 계산을 안해도 된다.

- **두 방식 다 방문하는 노드와 방문하는 순서는 같다.** 그러나 방문을 하더라도 계산을하느냐 안하고 바로 저장된 값을 사용해서 리턴하는 냐는 큰 차이다.



```c++
#include <string>
#include <vector>
#include <iostream>
#include <algorithm>

using namespace std;

int answer;

int dp[501][501] = {0, };

int recursive(int row, int col, vector<vector<int>>&a)
{
     cout << "row" << row << "col" << col <<endl;
     if(a.size()== row) return 0;
     if (dp[row][col] > 0)
     {
          cout << "dp : " <<"row" << row << "col" << col <<endl;
          return dp[row][col];
     }
     
     return dp[row][col] = a[row][col] + max(recursive(row+1,col,a), recursive(row+1,col+1,a));
}

int solution(vector<vector<int>> triangle) {
     
     answer = -1;
     
     
     
     answer = recursive(0,0,triangle);
     
     return answer;
}

```





-------------------------------------------------------------

가장 큰 수

```c++
#include <string>
#include <vector>
#include <algorithm>
#include <iostream>

using namespace std;


bool cmp(string a, string b)
{
     string temp = "";
     temp += a + b;
     
     string temp1 = "";
     temp1 += b + a;
     
     if(temp > temp1){
          return true;
     }
     
     else if(temp1 > temp){
          return false;
     }
     
     else
          return false;
     
}


string solution(vector<int> numbers) {
     string answer = "";
     
     vector<string> strNumbers;
     
     for(int i = 0; i<numbers.size(); i++)
     {
          string temp = "";
          temp = to_string(numbers[i]);
          strNumbers.push_back(temp);
     }
     
     sort(strNumbers.begin(), strNumbers.end(), cmp);
     
     
     for(auto a : strNumbers){
          answer += a;
     }
     
     if(answer.size() == count(answer.begin(),answer.end(), '0'))
          return "0";
     
     return answer;
}

```



```c++
bool cmp(string a, string b)
{
     string temp = "";
     temp += a + b;
     
     string temp1 = "";
     temp1 += b + a;
     
     if(temp > temp1){
          return true;
     }
     
     else if(temp1 > temp){
          return false;
     }
     
     else
          return false;
     
}
```

temp가 더 크다면 true를 리턴.





배운 것. 

1. cmp 함수.

2. count 함수.

3. sort함수

   1. 퀵정렬 기반으로 구현. 퀵정렬은 O(nlogn)

   2. cmp 함수에서 true는 바꾸지마라. false는 바꿔라.

      - ```c++
        bool cmp(int a, int b)
        {
             return a > b;//a가 크다면 true리턴. b가 크다면 false리턴.
          								//들어온 기준이 a, b순이므로 b가 크면 false이므로 b, a순으로 변경.
        }
        
        
        int main()
        {
             int a = 5;
             int b = 6;
             
             cout << cmp(a,b);
             
             return 0;
        }
        ```

      - 위 코드는 false가 출력이 됨.

      - 이유는 간단하게 순서를 a, b순서를 생각하고 a가 b보다 크냐라고 물었을 때, false이므로 바꿔야 한다.

      - 즉, 기준은 a ,b 순서대로 있는 채로 cmp함수에 들어오고 조건문을 준 다음. true,false를 리턴.

4. 

--------------------------------------------------------------------------------------------------------

우테코 지하철 노선도 해보기.





-----------------------------------------------------------

수열, 조합

https://www.acmicpc.net/problem/18809 - 2.4날 일어나서 풀기.

1. C++ stl

- 이진 검색 트리(정렬된 자료구조)
  - set
  - multiset - 중복허용
  - map
- 해시
  - unordered_set
  - unordered_multiset
  - unordered_map
- ETC
  - vector
  - pair
  - tuple
  - stack
  - queue
  - deque



2. JAVA 컬렉션

- Set - 순서가 없음, 데이터 중복 x
  - HashSet
  - TreeSet
- List - 순서가 있음, 데이터 중복 허용
  - LinkedList
  - Vector
  - ArrayList
- Queue - List와 유사
  - LinkedList
  - PriorityQueue
- Map - (key,value), 키 중복 x, value 중복 허용
  - Hashtable
  - HashMap
  - TreeMap



c++ vs java 완전 동일한 것은 아님.

- 해시
  - C++ vs Java
    - vector vs ArrayList
    - unordered_set 
    - unordered_map vs HashMap
    - map vs Map



# 
	
	
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.util.Date"%>
<!DOCTYPE html>
<html lang="ko">
	<head>
		<link rel="stylesheet" type="text/css" href="https://pg.cnspay.co.kr:443/dlp/css/shop/styleM.css" />
		<link rel="stylesheet" href="https://pg.cnspay.co.kr:443/dlp/css/mobile/cnspay.css" type="text/css" />
		<script src="https://pg.cnspay.co.kr:443/dlp/scripts/lib/easyXDM.min.js" type="text/javascript"></script>
		<script src="https://pg.cnspay.co.kr:443/dlp/scripts/lib/json3.min.js" type="text/javascript"></script>
		<script src="https://pg.cnspay.co.kr:443/dlp/cnspay_tr.js" type="text/javascript"></script>
		<script src="https://spi.maps.daum.net/imap/map_js_init/postcode.v2.js"></script>
	    <%@ include file="../include/head.jspf"%>
		<script src="/web_twins/js/membership.js?v=${__cacheTime}"></script>
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		<jsp:useBean id="headCurrentTime" class="java.util.Date"/>
<fmt:formatDate value="${headCurrentTime}" pattern="yyyyMMddHHmm" var="headCurrentTime"/>
	<style>
		.goods-table{ margin-bottom: 2.3vw; }
.goods-table > p{ margin-top: 20px; margin-bottom: 18px; }
.goods-table > p::after{ display: block; clear: both; content:""; }
.goods-table > p a{ float: right; display: inline-block; font-size: 16px; line-height: 30px; padding: 0 20px; border: 1px solid #c00a3f; background: #ffffff; color: #c00a3f; border-radius: 15px; }
.goods-table table{ width: 100%; border-collapse: collapse; }
.goods-table table tr td,
.goods-table table tr th{  font-size: 3.4vw; padding: 3px 0; text-align: center;white-space: nowrap;font-family: LGSmHaR;padding:1.3vw;}
.goods-table table tr th{ background: #c00a3f; color: #ffffff; font-weight: normal;}
.goods-table table tr td{ color: #111111;border: 1px solid #cccccc;border-style:solid none;}
.goods-table table tr td:nth-child(5) { padding: 1.3vw 0.7vw 1.3vw 1.3vw; text-align: right;  }
.goods-table table select{ padding: 5px 20px; border: 0; width: 100%; appearance: none; -moz-appearance: none; -webkit-appearance: none; background: url('/images/member/bg_goods_select.png') no-repeat 92% center; }
.goods-table + button { background: white; border: 1px solid rgba(0,0,0,0.5); color: #222; text-decoration: none; font-size: 3.1vw; font-family: LGSmHaR; word-break: keep-all; padding: 3px;}

.goods-list .name{ letter-spacing: -1px;}

.img-wrap {position: relative;}

.sold_out { position: absolute; width: 100%; height: 100%; top: 0; z-index: 999; display: flex; justify-content: center; align-items: center; }
.sold_out div { width: 60%; height: 60%; border: 3px #c00a3f solid; border-radius: 50%; background: white; display: flex; justify-content: center; align-items: center; flex-direction: column; }
.sold_out div span { color: #c00a3f; font-size: 20px; font-weight: bold; line-height: 30px; }

.hide{display: none;}

.ui-spinner.ui-corner-all.ui-widget.ui-widget-content{width:23.4vw;
	height:6.3vw !important;
	border:1px solid #d2d2d2;
	font-family:"LGSmHaSB";
	font-size:3.4vw;
	text-align:center;
	border-radius:0 !important;}

.goods-wrap .ui-spinner{ border: 1px solid #cccccc; width: 73px; height: 20px }
.goods-wrap .ui-spinner a.ui-spinner-button{position: relative;width: 7.2vw;height: 6.3vw;border:none !important;background: none;}
.goods-wrap .ui-spinner a.ui-spinner-button:first-of-type{ float: right; margin-left: 0; bottom: 2px;}
.goods-wrap .ui-spinner a.ui-spinner-button:last-of-type{ float: left; margin-left: 0; right: 2px; }
.goods-wrap .ui-spinner .ui-button-icon-only .ui-icon{ width: 2.5vw; height: 2.5vw; transform: translate(-50%, -50%); margin-left: 0; margin-top: 0; top: 50%;left:50%; }
.goods-wrap .ui-spinner .ui-button-icon-only .ui-icon::before{ content:""; display: none; position: absolute; transform: translate(-50%, -50%); left: 50%; top: 50%; }
.goods-wrap .ui-spinner a.ui-spinner-button:first-of-type .ui-button-icon::after { display: none;}
.goods-wrap .ui-spinner a.ui-spinner-button:last-of-type .ui-button-icon::before{ width: 2.5vw; height: 1px; background: #cccccc;}
.goods-wrap .ui-spinner a.ui-spinner-button:first-of-type .ui-button-icon::before{ width: 2.5vw; height: 1px; background: #cccccc; }
.goods-wrap .ui-spinner a.ui-spinner-button:first-of-type .ui-button-icon::after{ width: 1px; height: 13px; background: #cccccc; content:""; display: block; position: absolute; transform: translate(-50%, -50%); left: 50%; top: 50%; }
.goods-wrap .ui-spinner .ui-spinner-input{margin: 0;padding: 0;text-align: center;width: 12vw;position: absolute;left: calc(50% - 1px);transform: translateX(-50%);font-size: 3.4vw;height:6.3vw;/* border:1px solid #d2d2d2; *//* border-style:none solid !important; */}
.goods-wrap .ui-spinner a.ui-spinner-button:first-of-type .ui-button-icon::after {display: none;}
.ui-icon-triangle-1-n {background:url("/web_twins/images/btn_plus.jpg") center no-repeat !important;
	background-size:100% !important}
.ui-icon-triangle-1-s {background:url("/web_twins/images/btn_min.jpg") center no-repeat !important;
	background-size:100% !important}

.ui-spinner .ui-corner-all .ui-widget .ui-widget-content{ height: 20px; right: 100px;}

[gift_code] ul, [gift_code] span.choice {width:23.4vw;border: 1px solid #d2d2d2;font-size:3.1vw ;color:#444;padding:0 2.3vw;}
[gift_code] ul {position:absolute;top:6.2vw;right:0;background:#fff;z-index:1000;border-top:0;display:none;}
[gift_code] ul .soldout {text-decoration:line-through; color: #e1e1e1;}
[gift_code] span.choice {display:flex;align-items:center;height:6.3vw;background: url('/images/member/bg_goods_select.png') no-repeat 92% center; right: 0; position: relative; font-size: 3.1vw; font-family: "LGSmHaR"}

.choice_wrap {display:flex;align-items:flex-start;justify-content:center;flex-direction:column;}
.choice_wrap div {display:flex;align-items:center;justify-content:flex-start;position:relative;}
.choice_wrap label {margin-right:auto;font-size:16px;font-weight:400;}
/*.choice_wrap ul {padding:1.5px 3.5px !important; position: absolute; right: 0; z-index: 1002; top: 21px;}*/
.choice_wrap ul li { font-size: 3.4vw; line-height:1.6;height:auto;}
.choice_wrap div + div {margin-top:10px}

.goods-wrap.list .goods .choice_wrap {margin-top: 6px;}
.goods-wrap.list .goods .choice_wrap > div {width:100%;height:6.3vw;}

.layer_popup03 {z-index: 2005;}

/* 사이즈 선택 */
.list li { border-bottom: none;}
.ul { text-align: center;}
.choice_wrap ul li {}

/* 결제 금액 */
.inputTable .totalCost { padding: 8px 0 8px 0; font-family: "LGSmHaR"; }


.notice_text {display:block;color:#c00a3f; font-size:3.1vw; font-family:'LGSmHaR'; position:relative; padding-left:3.8vw;}
.notice_text:first-of-type {margin-top:4vw;}

.notice_text::before {
	content:'※';
	display:block;
	position:absolute;
	top:0;
	left:0;

}

/* 유효기간 */
.msg.noti::before { content: ''; display: block; position: absolute; top: 0; left: 0; }
#membershipPeriod {padding:0 0 0 0;}

.read_wrap {display:flex !important;align-items:center;width:100%;height:10.9vw;padding:0 3.1vw;border:1px solid #d2d2d2;background:#f2f2f2;}
.my_modi .checkbox-item input[type="checkbox"]+label:after {width:1.8vw;height:3.1vw;}
.checkbox-item input[type="checkbox"]+label:after {left:2vw;}


#addr_info { color: #00984b; }

.notice_text.last::before{ content:''; display:block; position:absolute; top:0; left:0;}
.notice_text.last{padding: 0 0 6px 0; color: #00984b; }
.notice_text.last:first-of-type{margin-top: 3vw;}

.position_rb {position: absolute; right: 0; bottom: 0; width: 20%; height: 20%;}
#uniform_dialog_img { width: 100%; }
.ui-dialog.ui-corner-all.ui-widget.ui-widget-content.ui-front.ui-draggable.ui-resizable{z-index: 1500;}

	</style>
</head>
<body>
	<form id="regMemberVip" name="regMemberVip" method="post" action="/web/membership/vip/3">
		<input type="hidden" id="USER_ID" name="IN_DS.USER_ID" value="${USER_SESSION.USER_ID}" />
		<input type="hidden" id="BIRTHDATE" name="IN_DS.BIRTHDATE" value="${OUT_DS[0].BIRTHDATE}" />
		<input type="hidden" id="CHILD_FLAG" name="IN_DS.CHILD_FLAG" value="">
		<input type="hidden" id="COST" name="IN_DS.COST" value="">
		<input type="hidden" id="ENTER_STATUS" name="IN_DS.ENTER_STATUS" value="">
		<input type="hidden" id="LIMIT_CNT" name="IN_DS.LIMIT_CNT" value="">
		<input type="hidden" id="LMM_SEQ" name="IN_DS.LMM_SEQ" value="<c:out value="${OUT_DS[0]['LM_SEQ']}"/>">
		<input type="hidden" id="MEMBERSHIP_COST" name="IN_DS.MEMBERSHIP_COST" value="${OUT_MEMBERSHIP[0].MEMBERSHIP_COST}" />
		<input type="hidden" id="MEMBERSHIP_PRIVATE_AGREE_YN" name="IN_DS.MEMBERSHIP_PRIVATE_AGREE_YN" value="${param.MEMBERSHIP_PRIVATE_AGREE_YN}" />
		<input type="hidden" id="ORDER_NO" name="IN_DS.ORDER_NO" value="">
		<input type="hidden" id="PARENT_AGREE_YN" name="IN_DS.PARENT_AGREE_YN" value="${OUT_DS[0]['PARENT_AGREE_YN']}" />
		<input type="hidden" id="PAY_AGREE_YN" name="IN_DS.PAY_AGREE_YN" value="">
		<input type="hidden" id="PAY_COMPLT_YN" name="IN_DS.PAY_COMPLT_YN" value="">
		<input type="hidden" id="PAY_TYPE_CODE" name="IN_DS.PAY_TYPE_CODE" value="">
		<input type="hidden" id="SKR_PRIVATE_AGREE_YN" name="IN_DS.TWN_PRIVATE_AGREE_YN" value="<c:out value="${OUT_DS[0]['TWN_PRIVATE_AGREE_YN']}"/>">
		<%-- <input type="hidden" id="SKR_TERMS_AGREE_YN" name="IN_DS.TWN_TERMS_AGREE_YN" value="<c:out value="${OUT_DS[0]['TWN_TERMS_AGREE_YN']}"/>"> --%>
		<%-- <input type="hidden" id="TERMS_AGREE_YN" name="IN_DS.TERMS_AGREE_YN" value="<c:out value="${OUT_DS[0]['TERMS_AGREE_YN']}"/>"> --%>
		<input type="hidden" id="TWN_EMAIL_RCV_YN" name="IN_DS.TWN_EMAIL_RCV_YN" value="${OUT_DS[0]['TWN_EMAIL_RCV_YN']}" />
		<%-- <input type="hidden" id="TWN_SMS_RCV_YN" name="IN_DS.TWN_SMS_RCV_YN" value="${OUT_DS[0]['TWN_SMS_RCV_YN']}" /> --%>

		<c:if test="${param.MEMBERSHIP_PRIVATE_AGREE_YN ne 'Y'}">
			<script>
				alert("약관에 동의해야 합니다.");
				$(location).attr("href", "/web/membership/vip/1");
			</script>
		</c:if>
		<!-- wrapper -->
			<div class="wrapper">
				<!-- header -->
				<%@ include file="../include/headerWrap.jspf"%>
				<main class="container_sub">
					<!-- 페이지 로케이션 -->
					<div class="location">
						<ul>
							<li>
								<a href="/" class="home">홈</a>
							</li>
							<li>트윈스 연간회원</li>
							<li>연간회원 가입</li>
						</ul>
					</div>
					<!-- 컨텐츠 -->
					<div class="contents">
						<div class="cont_wrap">
							<div class="combine_wrap year_wrap">
								<div class="step step02">
									<ol>
										<li class="active">
											<span>약관동의</span>
										</li>
										<li class="active check">
											<span>정보입력&middot;결제</span>
										</li>
										<li>
											<span>가입완료</span>
										</li>
									</ol>
								</div>
								<div class="my_modi">
									<form action="">
										<fieldset>
											<legend>기본 회원정보</legend>
											<div class="my_info01 basic">
												<h3 style="font-size:4.4vw;">기본 회원정보</h3>
												<dl>
													<dt>회원종류</dt>
													<fmt:parseNumber var="birth_year" integerOnly="true" type="number" value="${fn:substring(OUT_DS[0]['BIRTHDATE'], 0, 4)}" />
													<fmt:parseNumber var="this_year" integerOnly="true" type="number" value="${fn:substring(headCurrentTime, 0, 4)}" />
													<c:set var="adult_check" value="${this_year - birth_year ge 13}"/>
													<dd>
														<c:forEach var="ITEM" items="${OUT_MEMBERSHIP}" varStatus="status">
															<c:if test="${(ITEM['MEMBERSHIP_TYPE'] eq 'ASM' and adult_check) or (ITEM['MEMBERSHIP_TYPE'] eq 'CHT' and not adult_check)}">
																<span class="checkbox_style" id="" membership_type="${ITEM['MEMBERSHIP_TYPE']}">
																<input id="mtype${status.index}" name="mtypeselect" type="radio" title="" value="${ITEM['LMM_SEQ']}" onclick = "" membership_name="${ITEM['MEMBERSHIP_NAME']}" membership_cost="${ITEM['MEMBERSHIP_COST']}">
																<label for="mtype${status.index}">${ITEM['MEMBERSHIP_NAME']}</label>
																</span>
															</c:if>
														</c:forEach>
														<span class="msg noti" id="membershipPeriod"><%-- 유효기간/가입비 --%></span>
														<!-- <input type="hidden" id="LMM_SEQ" name="IN_DS.LMM_SEQ" value="" /> -->
													</dd>
												</dl>
												<dl class="id">
													<dt>ID</dt>
													<dd>
														<input type="text" placeholder="${OUT_DS[0]['USER_ID']}" disabled>
													</dd>
												</dl>
												<dl>
													<dt>이름</dt>
													<dd>
														<input type="text" placeholder="${OUT_DS[0]['NAME']}" disabled>
													</dd>
												</dl>
												<dl>
													<dt>생년월일</dt>
													<dd>
														<input type="text" placeholder="${fn:substring(OUT_DS[0]['BIRTHDATE'], 0, 4)}-${fn:substring(OUT_DS[0]['BIRTHDATE'], 4, 6)}-${fn:substring(OUT_DS[0]['BIRTHDATE'], 6, 8)}" disabled>
													</dd>
												</dl>
											</div>
											<div class="my_info04 basic">
												<dl class="phone">
													<dt>휴대폰 번호</dt>
													<dd>
														<div class="flex" id="mobile">
															<input type="text" id="MOBILE_NO" name="IN_DS.MOBILE_NO" value="${OUT_DS[0]['MOBILE_NO']}" readonly="readonly">
															<button type="button" onclick="prefare_modify_mobile()">수정</button>
														</div>
														<div id="certMobile" style="display:none;">
															<input class="" id="MOBILE_NO_CERT" name="MOBILE_NO_CERT" type="text" title="휴대폰 번호 편집창" placeholder="" value="" style="width: 38.45vw;">
															<button type="button" id="sendCertNo">인증번호 발송</button>
															<button type="button" id="cancelCert">취소</button>
														</div>
														<div class="checkbox-item">
															<input type="checkbox" id="agree_sms" name="agree_sms" onclick="controlSelector('sms')">
															<label for="agree_sms">LG트윈스 마케팅 관련 SMS 수신 동의
															</label>
															<input type="hidden" id="TWN_SMS_RCV_YN" name="IN_DS.TWN_SMS_RCV_YN" value="<c:out value="${OUT_DS[0]['TWN_SMS_RCV_YN']}"/>" />
														</div>
														<span>미동의 시 트윈스 연간회원을 위한 이벤트 및 혜택에 관한 SMS가 발송되지
															않을 수 있습니다.</span>
													</dd>
												</dl>
												<%-- <dl>
													<dt>이메일</dt>
													<dd>
														<input type="text" id="EMAIL_ADDR" name="IN_DS.EMAIL_ADDR" value="${OUT_DS[0]['EMAIL_ADDR']}" onchange="checkEmail()">
														<div class="checkbox-item">
															<input type="checkbox" id="agree_email" name="agree_email" onclick="controlSelector('email')">
															<label for="agree_email">LG트윈스 마케팅 관련 이메일 수신 동의</label>
														</div>
													</dd>
												</dl> --%>
												<input type="hidden" id="EMAIL_ADDR" name="IN_DS.EMAIL_ADDR" value="${OUT_DS[0]['EMAIL_ADDR']}"/>
											</div>
											<div class="my_info05 basic">
												<dl class="address">
													<dt>주소</dt>
													<dd>
														<div class="flex">
															<input class="" id="ZIPCODE" name="IN_DS.ZIPCODE" type="text" maxbytes="7" title="우편번호" placeholder="우편번호" value="<c:out value="${OUT_DS[0]['ZIPCODE']}" />" readonly="readonly" onchange="checkAddr()">
															<button type="button" id="open_daum_address">주소검색</button>
														</div>
														<div id="layer" style="display:none;position:fixed;overflow:hidden;z-index:1000;-webkit-overflow-scrolling:touch;">
		            										<img src="//i1.daumcdn.net/localimg/localimages/07/postcode/320/close.png" id="btnCloseLayer" style="cursor:pointer;position:absolute;right:-3px;top:-3px;z-index:1" onclick="closeDaumPostcode()" alt="닫기 버튼">
		        										</div>
														<input class="" id="ADDRESS" name="IN_DS.ADDRESS" type="text" maxbytes="100" title="집주소1" placeholder="주소" value="<c:out value="${OUT_DS[0]['ADDRESS']}" />" readonly="readonly" onchange="checkAddr()">
														<input class="" id="ADDRESS_DETAIL" name="IN_DS.ADDRESS_DETAIL" type="text" maxbytes="200" title="집주소2" placeholder="상세주소" value="<c:out value="${OUT_DS[0]['ADDRESS_DETAIL']}" />" onchange="checkAddr()" style="margin-top:3.1vw;">
														<span id="addr_info">회원카드 및 회원 기념품의 원활한 배송을 위해, 3월 27일(월) 이후 수령 가능한 주소를 입력 바랍니다.</span>
													</dd>
												</dl>

												<!-- 연관회원 상품 영역 -->
												<%-- start : 상품 목록 --%>
							<div class="item_wrap">
												<c:set var="uniform_not_sold_out_count" value="0"/>
							<c:forEach items="${OUT_GIFT}" var="ITEM" varStatus="status">
								<fmt:parseNumber var="last_cnt" integerOnly="true" type="number" value="${ITEM.ATTRIBUTE2}" />
								<c:if test="${fn:contains(ITEM.GIFT_CODE, '2023U')}">
									<c:choose>
										<c:when test="${last_cnt > 0}">
											<c:set var="uniform_not_sold_out_count" value="${uniform_not_sold_out_count+1}"/>
										</c:when>
									</c:choose>
								</c:if>
							</c:forEach>
											<div class="goods-list">
												<div class="board_header" section-type="goods">
													<h3>회원 기념품(선택)</h3>
												</div>
												<div class="goods-wrap list">
														<c:forEach items="${OUT_GIFT}" var="ITEM" varStatus="status">
														<c:if test="${status.index eq 0 or OUT_GIFT[status.index].GIFT_CODE ne OUT_GIFT[status.index-1].GIFT_CODE}">
															<div gift_code="${ITEM.GIFT_CODE}" order_no="${ITEM.ATTRIBUTE5}" class="goods">
																<div class="img-wrap">
																	<img src="/images/member/img_goods_2023_${ITEM.GIFT_CODE}.jpg" alt="" readonly>
																	<c:if test="${ITEM.ATTRIBUTE4 eq 'Y'}">
																		<div class="position_rb">
																			<img src="/images/member/search_icon.jpg" alt="" readonly onclick="javascript:openSizeDialog('${ITEM.GIFT_CODE}')">
																		</div>
																	</c:if>
																	<fmt:parseNumber var="last_cnt" integerOnly="true" type="number" value="${ITEM.ATTRIBUTE2}" />
																	<c:set var="is_uniform" value="${fn:contains(ITEM.GIFT_CODE, '2023U')}"/>
																	<c:set var="is_not_sold_out" value="${(is_uniform and uniform_not_sold_out_count>0) or (not is_uniform and last_cnt > 0)}"/>
																	<div class="sold_out<c:if test="${is_not_sold_out}"> hide</c:if>">
																		<div>
																			<span>SOLD</span>
																			<span>OUT</span>
																		</div>
																	</div>
																</div>
																<div class="txt-wrap">
																	<p class="name">${ITEM.ATTRIBUTE1}</p>
																	<p class="price"><fmt:formatNumber value="${ITEM.ATTRIBUTE3}" pattern="#,###" />원<span></span></p>
																</div>
																<div class="choice_wrap">
																	<div>
																		<label for="spinner${ITEM.ATTRIBUTE5}">수량</label><input id="spinner${ITEM.ATTRIBUTE5}" name="value" value="0" readonly>
																	</div>
																	<c:if test="${not empty ITEM.ATTRIBUTE4 and ITEM.ATTRIBUTE4 eq 'Y'}">
																		<div id="options${ITEM.ATTRIBUTE5}">
																			<label for="options${ITEM.ATTRIBUTE5}">사이즈</label>
																			<span class="choice">선택하세요</span>
																			<ul class="size_list">
																			</ul>
																		</div>
																	</c:if>
																</div>
															</div>
														</c:if>
													</c:forEach>
												</div>
											</div>
											<span class="notice_text" section-type="goods">연간회원 기념품은 한정 수량으로 판매되며, 품절 시 재입고 되지 않습니다.</span>
											<span class="notice_text" section-type="goods">품목별 구매 가능 수량은 1개로 제한됩니다. (1개 품목 2개 이상 구매 불가)</span>
											<span class="notice_text" section-type="goods">인쇄 팬북은 추후 홈페이지/앱을 통해 디지털 팬북으로 오픈 예정입니다.</span>
											<script>
									$(document).ready(function() {
										//하드 코딩 작성 영역
										//$("[order_no=1] .name").html("캘린더, 랜야드, 가방, 응원부채 (2개)");

										<c:forEach var="ITEM" items="${OUT_GIFT}" begin="0" end="${fn:length(OUT_GIFT)}" varStatus="status">
										<c:if test="${status.index eq 0 or OUT_GIFT[status.index].GIFT_CODE ne OUT_GIFT[status.index-1].GIFT_CODE}">
											<c:choose>
												<c:when test="${ITEM.ATTRIBUTE4 eq 'Y'}">
													$.getJSON(getAjaxUrl("BR_Get_Code_Gift_List","IN_DS","OUT_DS")+ "&IN_DS.GIFT_CODE=<c:out value="${ITEM.GIFT_CODE}"/>", function(result) {
														var res_data = result.OUT_DS;
														var opt_array = [];
														for (var i = 0; i < res_data.length; i++) {
															//opt_array.push('<option value="'+res_data[i].TGM_SEQ+'" last_cnt="'+res_data[i].ATTRIBUTE2+'">'+res_data[i].GIFT_NAME+'</option>');
															var sold_out = Number(res_data[i].ATTRIBUTE2) > 0 ? "" : "soldout";
															$("[gift_code=<c:out value="${ITEM.GIFT_CODE}"/>] .size_list").append(
																$("<li/>", {
																	"class" : sold_out,
																	"order_no" : res_data[i].ATTRIBUTE5,
																	"tgm_seq" : res_data[i].TGM_SEQ,
																	"last_cnt" : res_data[i].ATTRIBUTE2,
																	"onclick": "javascript:sizeChange(this)"
																}).append(res_data[i].GIFT_NAME)
															);
														}

														//$("[gift_code=<c:out value="${ITEM.GIFT_CODE}"/>] select").append(opt_array.join(''));

														if(res_data.length == 1) {
															$("[gift_code=<c:out value="${ITEM.GIFT_CODE}"/>] select option:eq(0)").remove();//추가 : 2022년 2월 17일
															$("[gift_code=<c:out value="${ITEM.GIFT_CODE}"/>] select").attr("style","min-width:103px;"); //추가 : 2022년 2월 16일
															$("#select<c:out value="${ITEM.ATTRIBUTE5}"/> td:nth-child(3)").html(res_data[0].GIFT_NAME);
														}
													});
												</c:when>
											</c:choose>
										</c:if>
									</c:forEach>
									});
								</script>
		</div>
		<div class="board_header">
			<h3 style="border-bottom:0;">주문 내역</h3>
		</div>
		<div class="goods-table goods-table02">
			<table id="">
				<caption>SET 상품 사이즈 선택</caption>
				<colgroup>
					<col style="width:5%">
					<col>
					<col style="width:20%">
					<col style="width:10%">
					<col style="width:10%">
				</colgroup>
				<thead>
					<tr>
						<th>
							<input type="checkbox" id="all_check">
						</th>
						<th>상품명</th>
						<th>사이즈</th>
						<th>수량</th>
						<th>가격(원)</th>
					</tr>
				</thead>
				<tbody id="">
					<tr>
											<td></td>
											<td class="goods_title">
												<span>${fn:substring(OUT_MEMBERSHIP[0].MEMBERSHIP_ST_TIMESTAMP,0,4)}</span>년 연간회원 가입비
											</td>
											<td>
												-
											</td>
											<td>
												1
											</td>
											<td class="item_cost">
												<fmt:formatNumber value="${OUT_MEMBERSHIP[0].MEMBERSHIP_COST}" pattern="#,###" />
											</td>
										</tr>
										<c:forEach var="ITEM" items="${OUT_GIFT}" begin="0" end="${fn:length(OUT_GIFT)}" varStatus="status">
											<c:if test="${status.index eq 0 or OUT_GIFT[status.index].GIFT_CODE ne OUT_GIFT[status.index-1].GIFT_CODE}">
												<tr id="select${ITEM.ATTRIBUTE5}">
													<td><input type="checkbox" class="gift_check" data-no="${ITEM.ATTRIBUTE5}"></td>
													<td class="goods_title">
														<c:out value="${ITEM.ATTRIBUTE1}"/>
													</td>
													<td>
														-
													</td>
													<td>
														1
													</td>
													<td class="ITEM_COST">
														<fmt:formatNumber value="${ITEM.ATTRIBUTE3}" pattern="#,###" />
													</td>
												</tr>
											</c:if>
										</c:forEach>
				</tbody>
			</table>
		</div>



		<button id="delete" onclick="selectDelete()">선택상품 삭제</button>

												<!-- 법정 대리인 동의 -->

											<h3 id="agree_parent_area_header" class="agree_parent_area">법정대리인 동의</h3>


												<dl class="agree_parent_area">
													<dt>보호자 이름</dt>
													<dd>
														<input type="text" id="PARENT_NAME" name="IN_DS.PARENT_NAME">
													</dd>
												</dl>
												<div class="checkbox-item last02 agree_parent_area">
													<input type="checkbox" name="agree_parent" id="agree_parent" onclick="controlSelector('parent')">
													<label for="agree_parent">법정대리인 동의</label>
												</div>
												<span class="text_adult agree_parent_area">상기 신청인은 만 14세 미만 아동으로 개인정보보호법 22조에
													의거 법정대리인으로서 해당 아동의 개인정보수집 및 이용,
													제공 내역 및 고유식별 정보 처리 내용을 확인하였고 이에 대한
													처리에 동의 합니다.</span>

												<h3 id="price_area" style="font-size:4.4vw;">결제 정보</h3>
												<div class="">
													<dl style="margin-top:0;border-top:0;">
														<dt class="totalCost">총 결제금액</dt>
														<dd class="totalCost"><span class="read_wrap" id="membershipCost"><fmt:formatNumber value="${OUT_MEMBERSHIP[0].MEMBERSHIP_COST}" pattern="#,###" />원</span></dd>
													</dl>
												</div>
												<input type="hidden" id="TERMS_AGREE_YN" name="IN_DS.TERMS_AGREE_YN" value="<c:out value="${OUT_DS[0]['TERMS_AGREE_YN']}"/>">
	 											<!-- <input type="hidden" id="LIMIT_CNT" name="LIMIT_CNT" value=""> -->
												<input type="hidden" id="joinV1_URL" name="joinV1_URL" value="<c:url value='/pc_twins/member_vip/joinV1'/>">
												<input type="hidden" id="LM_SEQ" name="IN_DS.LM_SEQ" value="<c:out value="${OUT_DS[0]['LM_SEQ']}"/>">
												<!-- <input type="hidden" id="COST" name="IN_DS.COST" value=""> -->
												<!-- <input type="hidden" id="PAY_TYPE_CODE" name="IN_DS.PAY_TYPE_CODE" value=""> -->
												<!-- <input type="hidden" id="PAY_COMPLT_YN" name="IN_DS.PAY_COMPLT_YN" value=""> -->
												<!-- <input type="hidden" id="PAY_AGREE_YN" name="IN_DS.PAY_AGREE_YN" value=""> -->
												<!-- <input type="hidden" id="ORDER_NO" name="IN_DS.ORDER_NO" value=""> -->

	 											<!-- <input type="hidden" id="ENTER_STATUS" name="IN_DS.ENTER_STATUS" value=""> -->

												<c:forEach var="ITEM" items="${OUT_GIFT}" begin="0" end="${fn:length(OUT_GIFT)}" varStatus="status">
													<c:if test="${status.index eq 0 or OUT_GIFT[status.index].GIFT_CODE ne OUT_GIFT[status.index-1].GIFT_CODE}">
														<!-- <c:out value="${OUT_GIFT[status.index]['ATTRIBUTE1']}"/> 정보 (고유번호/개수/가격) -->
														<input type="hidden" id="GIFT_SEQ_${ITEM.ATTRIBUTE5}" name="IN_DS.ATTR${ITEM.ATTRIBUTE5}" value="<c:out value="${ITEM.TGM_SEQ}"/>" order="${ITEM.ATTRIBUTE5}">
														<input type="hidden" id="GIFT_CNT_${ITEM.ATTRIBUTE5}" name="IN_DS.GIFT_CNT_${ITEM.ATTRIBUTE5}" value="0">
														<input type="hidden" id="GIFT_COST_${ITEM.ATTRIBUTE5}" name="GIFT_COST_${ITEM.ATTRIBUTE5}" value="<c:out value="${ITEM.ATTRIBUTE3}"/>"/>
													</c:if>
												</c:forEach>
												<div class="table_wrap">
								<!-- <table class="inputTable">
									<caption>이 표는 결제정보 내용입니다.</caption>
									<colgroup>
										<col style="width: 150px">
										<col>
									</colgroup>
									<tbody>
										<tr>
											<th class="totalCost" scope="row">결제금액</th>
											<td class="selectPay">
												<span class="read_wrap" id="membershipCost"><fmt:formatNumber value="${OUT_MEMBERSHIP[0].MEMBERSHIP_COST}" pattern="#,###" />원</span>
											</td>


										</tr>
									</tbody>
								</table>
							</div> -->
						<%-- 						<dl id="price_normal" class="fee">
													<dt>가입비</dt>
													<dd>
														<input type="text" placeholder="<fmt:formatNumber value="${OUT_MEMBERSHIP[0].MEMBERSHIP_COST}" pattern="#,###" />원" disabled>
													</dd>
												</dl>

												<dl id="price_goods">
													<dt>총 상품금액</dt>
													<dd>
														<input type="text" placeholder="0원" disabled>
													</dd>
												</dl>
												<dl> --%>
												<dl>
													<dt>결제방법</dt>
													<dd>
														<%--
														<div class="checkbox_style">
															<input type="radio" id="pay1" name="payselect">
															<label for="pay1">실시간 계좌이체</label>
														</div>
														--%>
														<div class="checkbox_style">
															<input type="radio" id="pay2" name="payselect" value="CARD" checked="checked">
															<label for="pay2">신용카드</label>
														</div>
														<div class="checkbox_style">
															<input type="radio" id="pay3" name="payselect" value="SMILEPAY">
															<label for="pay3">스마일 페이(Smile Pay)<br/>결제금액의 0.5% 스마일캐시 적립</label>
														</div>
													</dd>
												</dl>
												<div class="checkbox-item last">
													<input type="checkbox" name="agree_payment1" id="agree_payment1" onclick="controlSelector('payment')">
													<label for="agree_payment1">연간회원 종류, 결제 금액, 배송정보 등을 최종 확인하였고, 결제를 진행하는데 동의합니다.</label>
												</div>
													<span class="notice_text last" section-type="goods">회원 기념품은 결제 완료 시 부분 취소가 불가능합니다.</span>
													<span class="notice_text last" section-type="goods">가입 취소 후 재가입 및 기념품 구매를 진행해 주셔야 하며, 재가입 시 취소한 기념품의 재구매 수량은 확보되지 않습니다.</span>
<!-- 												<div class="checkbox-item last">
													<input type="checkbox" name="agree_payment2" id="agree_payment2" onclick="controlSelector('payment')">
													<label for="agree_payment2">상품 종류, 결제 금액, 배송정보 등을 최종 확인하였고, 결제를 진행하는데 동의합니다.</label>
												</div> -->
											</div>
											<div class="btn_wrap" style="margin-top:4.7vw;">
												<button type="button" class="btn_red" onclick="prefareAddMembership()">가입</button>
											</div>
										</fieldset>
									</form>
								</div>
							</div>
						</div>
					</div>
				</main>
				<!-- footer -->
				<%@ include file="../include/footerWrap.jspf"%>
			</div>
		</form>
		<!-- 얼럿 -->
			<div id="layer_popup_alert" class="layer_popup03">
				<div class="layer_wrap">
					<div class="layer_content">
						<p><span class="msg">[값 체크 문구]</span><br>다시 확인해 주시기 바랍니다.</p>
						<div class="btn_wrap">
							<button type="button" class="btn_black" onclick="layer_close('layer_popup_alert')">확인</button>
						</div>
					</div>
				</div>
			</div>
			<div id="layer_popup_login" class="layer_popup03">
				<div class="layer_wrap">
					<div class="layer_content">
						<p>로그인을 해주시길 바랍니다.</p>
						<div class="btn_wrap">
							<button type="button" class="btn_black" onclick="go_login()">확인</button>
						</div>
					</div>
				</div>
			</div>
			<div id="layer_popup_already" class="layer_popup03">
				<div class="layer_wrap">
					<div class="layer_content">
						<p><span class="msg">이번 시즌 연간회원에 이미 가입하셨습니다.</p>
						<div class="btn_wrap">
							<button type="button" class="btn_black" onclick="layer_close('layer_popup_already')">확인</button>
						</div>
					</div>
				</div>
			</div>
			<div id="layer_popup_agree" class="layer_popup03">
				<div class="layer_wrap">
					<div class="layer_content">
						<p><span class="msg">[동의 체크 문구]</p>
						<div class="btn_wrap">
							<button type="button" class="btn_black" onclick="layer_close('layer_popup_agree')">확인</button>
						</div>
					</div>
				</div>
			</div>
			<div id="layer_popup_sold_out" class="layer_popup03">
				<div class="layer_wrap">
					<div class="layer_content">
						<p><span class="msg">선착순이 종료된 상품 존재</span></p>
						<div class="btn_wrap">
							<button type="button" class="btn_black" onclick="layer_close('layer_popup_sold_out')">확인</button>
						</div>
					</div>
				</div>
			</div>
			<div id="layer_popup_confirm" class="layer_popup03">
				<div class="layer_wrap">
					<div class="layer_content">
						<p><span class="msg">[상품 배송 메시지]</span><br/>계속 진행하시겠습니까?</p>
						<div class="btn_wrap">
							<button type="button" class="btn_black" onclick="executeAddMembership()">예</button>
							<button type="button" class="btn_red" onclick="layer_close('layer_popup_confirm')">아니오</button>
						</div>
					</div>
				</div>
			</div>
		<div class="size_dialog"></div>
		<form id="reqCnsPayForm" name="reqCnsPayForm" method="post" action="#">
	   <input type="hidden" id="GoodsCnt" name="GoodsCnt" value="1">
	   <input type="hidden" id="GoodsName" name="GoodsName" value="">
	   <input type="hidden" id="Amt" name="Amt" value="">
	   <input type="hidden" id="MID" name="MID" value="">
	   <input type="hidden" id="BuyerId" name="BuyerId" value="<c:out value="${USER_SESSION.USER_ID}"/>" >
	   <input type="hidden" id="BuyerName" name="BuyerName" value="<c:out value="${USER_SESSION.NAME}"/>" >
	   <input type="hidden" id="BuyerTel" name="BuyerTel" value="<c:out value="${USER_SESSION.MOBILE_NO}"/>" >
	   <input type="hidden" id="BuyerAddr" name="BuyerAddr" value="<c:out value="${USER_SESSION.ADDRESS}"/>" >
	   <input type="hidden" id="PayMethod" name="PayMethod" value="">
	   <input type="hidden" id="EdiDate" name="EdiDate" value="" maxlength="12">
	   <input type="hidden" id="EncryptData" name="EncryptData" value="">
	   <input type="hidden" id="UsePopupDlp" name="UsePopupDlp" value="">
	   <input type="hidden" id="GoodsCl" name="GoodsCl" >
	   <input type="hidden" id="Moid" name="Moid" >
	   <input type="hidden" id="BuyerEmail" name="BuyerEmail" >
	   <input type="hidden" id="SUB_ID" name="SUB_ID" >
	   <input type="hidden" id="MallUserID" name="MallUserID" >
	   <input type="hidden" id="VbankExpDate" name="VbankExpDate" >
	   <input type="hidden" id="OfferPeriodFlag" name="OfferPeriodFlag" >
	   <input type="hidden" id="OfferPeriod" name="OfferPeriod" >
	   <input type="hidden" id="MEMBERSHIP_TYPE" name="MEMBERSHIP_TYPE" >
	</form>
	<form id="reqKMCISForm" name="reqKMCISForm" method="post" action="#">
	   <input type="hidden" id="tr_cert" name="tr_cert">
	   <input type="hidden" id="tr_url" name="tr_url">
	</form>
	<input type="hidden" id="out_gift_size" value="<c:out value="${fn:length(OUT_GIFT)}"/>"/>
	<input type="hidden" id="basicGiftCost" value="<c:out value="${not empty OUT_GIFT[0]['ATTRIBUTE3']?OUT_GIFT[0]['ATTRIBUTE3']:0}"/>"/>
	<input type="hidden" id="costMembership" value="<c:out value="${not empty OUT_MEMBERSHIP[0]['MEMBERSHIP_COST']?OUT_MEMBERSHIP[0]['MEMBERSHIP_COST']:0}"/>"/>

	<form id="cancelRequest" name="cancelRequest" method="post" action="#">
		   <input type="hidden" id="GoodsCnt" name="GoodsCnt" value="1">
		   <input type="hidden" name="TID" id="TID" value="" />
		   <input type="hidden" name="MID" id="MID" value=""/>
		   <input type="hidden" name="CancelAmt" id="CancelAmt" value="" />
		   <input type="hidden" name="CancelMsg" id="CancelMsg" value="고객 요청" />
		   <input type="hidden" name="PartialCancelCode" id="PartialCancelCode" value="0" />
		   <input type="hidden" name="PreCancelCode" id="PreCancelCode" value="0" />
		</form>


		<!-- // wrapper -->
		<%@ include file="../include/fixedBtnWrap.jspf"%>

		<%@ include file="../include/nav.jspf"%>

		<script>
		var termsAgreeYn = $("#MEMBERSHIP_PRIVATE_AGREE_YN").val();
		var element_layer;
		var asisSmsAgreeYn = "";
		var asisEmailAgreeYn = "";
		var childFlag = "";
		var femaleFlag = "";
		var age = $("#BIRTHDATE").val();
		var birthYear =  Number(age.substring(0,4)); //출생년도
		var thisYear; //올해년도
		var ageCheck; //나이 체크용, 13보다 작으면 엘린이
		var todayFormat; //오늘 날짜를 yyyy-mm-dd 형식으로 변경
		var membership_start_date = ""; //멤버쉽 시작일 (유효기간)
		var membership_end_date = ""; //멤버쉽 종료일 (유효기간)
		var membership_recruit_start_date = ""; //멤버쉽 시작일 (모집기간)
		var membership_recruit_end_date = ""; //멤버쉽 종료일 (모집기간)
		var membership_cancle_deadline_date = ""; //가입 취소 마감일

		var setVal = 0; //가격 합산
		var out_gift_size//js에서 쓰기 떄문에 분리
		var costArr = new Array(out_gift_size); //가격 목록
		var basicGiftCost = 0; //기본 기념품 가격
		var costMembership = 0; //멤버쉽 가입 비용
		var sCost = 0; //총 합산 금액
		var sCostTxt ='';

		$(document).ready(function() {
			//$(document).ready 흐름도
			/*
				(01) 약관 동의 값 체크
				(02) 메일/SMS 수신 동의 값 저장
				(03) 휴대폰 관련 기능 활성화
				(04) 출생년도에 따른 영역 변경 (회원종류/대리인동의)
				(05) 회원종류 변경시에 대한 기능 추가
				(06) 첫번째 회원종류 라디오 활성화
				(07) 상품영역 비활성화
				(08) 주문 내역 영역 숨기기
				(09) 결제방법 변경시에 대한 기능 추가
				(10) 이메일/SMS 동의 값에 따른 설정
				(11) 대리인 동의 초기화
				(12) 다음 주소 API
				(13) 핸드폰 관련 기능 추가
				(14) 멤버쉽 기능 조회
				(15) CNS Pay에서 상품명에 표시되는 항목 설정
			*/

			for (var i=0; i<costArr.length; i++) {
				costArr[i]=0;
			}
			out_gift_size=Number($("#out_gift_size").val());
			//basicGiftCost=Number($("#basicGiftCost").val()); (2023년도 기준 기본 기념품 제거, 2023년 02월 02일)
			costMembership=Number($("#costMembership").val());

			thisYear = Number(todayStr.substring(0,4)); //올해 년도 설정, (주의) ready 바깥에 두면 0이 된다.
			ageCheck = thisYear - birthYear; //나이 체크용, 13보다 작으면 엘린이
			console.log("나이 차이 : " + ageCheck);
			todayFormat = todayStr.substr(0,4)+"-"+todayStr.substr(4,2)+"-"+todayStr.substr(6,2); //오늘 날짜를 yyyy-mm-dd 형식으로 변경, (주의) ready 바깥에 두면 0이 된다.

			//동의 페이지에서 체크 안 하고 강제로 넘어 왔을 떄 뒤로 보내기
			if ( termsAgreeYn != "Y" ) {
				alert("약관에 동의해야 합니다.");
				var joinV1_URL = $("#joinV1_URL").val();
				$("#view01").val(joinV1_URL);
				$("#redirectForm").submit();
			}

			//이메일/SMS 동의 여부
			asisSmsAgreeYn = $("#TWN_SMS_RCV_YN").val();
			//asisEmailAgreeYn = $("#TWN_EMAIL_RCV_YN").val();
			var EmailRcvYn = $("#TWN_EMAIL_RCV_YN").val();
			var smsRcvYn = $("#TWN_SMS_RCV_YN").val();
			if (asisSmsAgreeYn == "Y") {
				$("#agree_sms").attr("checked", true);
			} else {
				$("#agree_sms").attr("checked", false);
			}

			//휴대폰 관련 영역 활성화
			$("#mobile").show();
			$("#certMobile").hide();
			$("#modMobileNo").show();


			//회원구분 (나이/성별)
			console.log("생년월일 : " + age);
			console.log("현재 날짜 : " + todayStr);

			if (ageCheck < 13) {
				console.log("엘린이 회원");

				childFlag = "Y";

				//보호자동의 영역 활성화
				$(".agree_parent_area").show();

				//회원종류 라디오 버튼 변경
				$('.membershipSort').find('[membership_type^=C]').show();
				$('.membershipSort').find('[membership_type^=C]').find('input').attr("checked", true);
				$('.membershipSort').find('[membership_type^=A]').hide();
			}else{
				console.log("유료 멤버쉽 회원");

				//보호자동의 영역 비활성화
				$(".agree_parent_area").hide();

				//회원종류 라디오 버튼 변경
				$('.membershipSort').find('[membership_type^=A]').show();
				$('.membershipSort').find('[membership_type^=A]').find('input').attr("checked", true);
				$('.membershipSort').find('[membership_type^=C]').hide();
			}

			//주문 내역의 전체 선택에 대한 기능 추가
			$('#all_check').change(function(e){
				all_check();
			});





			//회원 종류 선택에 대한 기능 추가
			$(':radio[name="mtypeselect"]').change(function(e){
				//영역변경시 고려사항
				//1. 상품
				//2. 주문 내역
				//3. 가격

				e.preventDefault();
				retrieveMembershipMaster(); //멤버쉽 정보 조회

				//주문 내역의 멤버쉽 가입 가격 변경 (※ 2022년 기준 모든 멤버쉽의 가입 가격은 동일하게 설정됨)
				costMembership=Number($(e.target).attr("membership_cost"));
				$("#SELECT_MEMBERSHIP td:last-child").html(numberWithCommas(costMembership));

				sCost=0; //총 합산 가격 초기화
				//costArr = new Array(out_gift_size); //가격 배열 초기화
				for (var j=0; j<costArr.length; j++) {
					costArr[j]=0;
				}

				//영역 변경
				//var check = $(e.target).attr("membership_name").match("기념품"); //2023년 기준 (기본 / 기념품 멤버쉽 통합, 2023년 02월 02일)
				var check = true;
				if(check) {
					console.log("연간회원 가입 + 기념품");
				    $("[section-type=goods]").show(); //상품 영역 활성화
				    //$("#select1").show(); //주문 내역 - 기본 기념품 활성화 (2023년도 기준 기본 기념품 제거, 2023년 02월 02일)
					//$("#spinner1").val(1);//기본 기념품 개수, 제거 : 2022년 02월 16일
				    //$("#GIFT_CNT_1").val(1); //기본 기념품 개수 (2023년도 기준 기본 기념품 제거, 2023년 02월 02일)
				    $("#GIFT_CNT_1").val(0); //기본 기념품 개수
				    $("#delete").show(); //선택상품 삭제 버튼 활성화

					costArr[0] = basicGiftCost; //기본 기념품 가격 저장

					//주문내역 > 체크박스 열 활성화
					$($(".goods-table02 col")[0]).show();
					$($(".goods-table02 thead tr th")[0]).show();
					$($(".goods-table02 tbody tr#SELECT_MEMBERSHIP td")[0]).show();

					//부분 취소를 위한 실시간계좌이체 비활성화 및 신용카드 라디오 체크
					//if($("[name=payselect]:checked").val()=="BANK") $("#pay2").prop("checked",true); //실시간계좌이체 선택 시 신용카드로 변경
					//$("span[pay_select=BANK]").hide(); //영역 비활성화
					//$("#pay2").prop("checked",true); //신용카드
				}
				else {
					console.log("only 연간회원 가입");
 					console.log("2차 가입");
				    $("[section-type=goods]").hide(); //상품 영역 비활성화
				    $(".goods-table tbody tr:not(#SELECT_MEMBERSHIP)").hide(); //주문 내역 - 전체 비활성화
				    $("#delete").hide(); //선택상품 삭제 버튼 비활성화

				    //모든 spinner의 값을 0으로 초기화
				    $("[id^=GIFT_SEQ_]").each(function(idx, item){
						var no = $(item).attr("order");
						$("#spinner"+no).val(0);
						$("#GIFT_CNT_"+no).val(0);
					});

					//주문내역 > 체크박스 열 비활성화
				    $($(".goods-table02 col")[0]).hide();
				    $($(".goods-table02 thead tr th")[0]).hide();
				    $($(".goods-table02 tbody tr#SELECT_MEMBERSHIP td")[0]).hide();

				    //실시간계좌이체 활성화
				    //$("span[pay_select=BANK]").show();
				}

			    setTotAmt(); //가격 재합산
			});

			//체크박스 열 비활성화 (2023년도 기준 멤버쉽 통일, 2023년 02월 02일)
		    //$($(".goods-table02 col")[0]).hide();
		    //$($(".goods-table02 thead tr th")[0]).hide();
		    //$($(".goods-table02 tbody tr#SELECT_MEMBERSHIP td")[0]).hide();

			//첫번째 회원종류 라디오 버튼 활성화
			if(ageCheck<13) $($('[membership_type^=C] input[name="mtypeselect"]')[0]).prop('checked',true); //엘린이 (MEMEBERSHIP_TYPE이 C로 시작, Child)
			else $($('[membership_type^=A] input[name="mtypeselect"]')[0]).prop('checked',true); //성인 (MEMEBERSHIP_TYPE이 A로 시작, Adult)
			//$("[section-type=goods]").hide();  //상품 영역 비활성화  (2023년도 기준 멤버쉽 통일, 2023년 02월 02일)

			//주문 내역 숨기기
			$("#select1").hide(); //주문 내역 - 기본 기념품 비활성화
			initTr(); //주문 내역 - 1번~끝번호
			//$("#delete").hide(); //선택상품 삭제 버튼 비활성화

			//주문내역 > 체크박스 열 활성화
			//$($(".goods-table02 col")[0]).show();
			//$($(".goods-table02 thead tr th")[0]).show();
			//$($(".goods-table02 tbody tr#SELECT_MEMBERSHIP td")[0]).show();


			//결제 방법 선택에 대한 기능 추가
			$(':radio[name="payselect"]').change(function(e){
				e.preventDefault();
				retrieveMembershipMaster(); //멤버쉽 정보 조회

			})

			//1차, 2차 분기에 따른 상품 목록, 선택한 품
			var recruit_start_14 = membership_recruit_start_date.replaceAll(" ", "").replaceAll("-", "").replaceAll(":", "");
			var cancle_date_14 = membership_cancle_deadline_date.replaceAll(" ", "").replaceAll("-", "").replaceAll(":", "");
			console.log(membership_recruit_start_date);
			console.log(recruit_start_14 - cancle_date_14);
			if(recruit_start_14 > cancle_date_14){
				$(".item_wrap").hide();
				$("#delete").hide();
			}

			//이메일/SMS 수신 동의
			var EmailRcvYn = $("#TWN_EMAIL_RCV_YN").val();
			var smsRcvYn = $("#TWN_SMS_RCV_YN").val();
			if (EmailRcvYn == "Y") {
				$("#agree03").attr("checked", true);
			} else {
				$("#agree03").attr("checked", false);
			}
			if (smsRcvYn == "Y") {
				$("#agree01").attr("checked", true);
			} else {
				$("#agree01").attr("checked", false);
			}

			//대리인 동의 초기화
			$("#PARENT_AGREE_YN").val("");

			//다음우편번호 API
			element_layer = document.getElementById('layer');
			//다음 우편번호 검색
			$("#ZIPCODE, #open_daum_address").click(function(e){
				e.preventDefault();

				openDaumPostcode();
/*
				new daum.Postcode({
				    oncomplete: function(data) {
				    // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

				    // 각 주소의 노출 규칙에 따라 주소를 조합한다.
				    // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
				    var fullAddr = data.address; // 최종 주소 변수
				    var extraAddr = ''; // 조합형 주소 변수

				    // 기본 주소가 도로명 타입일때 조합한다.
				    if(data.addressType === 'R'){
				       //법정동명이 있을 경우 추가한다.
				       if(data.bname !== ''){
				           extraAddr += data.bname;
				       }
				       // 건물명이 있을 경우 추가한다.
				       if(data.buildingName !== ''){
				           extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
				       }
				       // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다.
				       fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : '');
				    }

				    // 우편번호와 주소 정보를 해당 필드에 넣는다.
				    $('#ZIPCODE').val(data.zonecode); //5자리 새우편번호 사용
				    $('#ADDRESS').val(fullAddr);

				    // iframe을 넣은 element를 안보이게 한다.
				    // (autoClose:false 기능을 이용한다면, 아래 코드를 제거해야 화면에서 사라지지 않는다.)
				     element_layer.style.display = 'none';
				    }
			}).embed(element_layer);

			    // iframe을 넣은 element를 보이게 한다.
			    element_layer.style.display = 'block';

				// iframe을 넣은 element의 위치를 화면의 가운데로 이동시킨다.
			    initLayerPosition(element_layer); */
			});

			//핸드폰 번호 인증 기능 추가
			$("#modMobileNo").click(function(e){
				//휴대폰번호 수정
				e.preventDefault();

				$("#mobile").hide();
				$("#certMobile").show();
				$("#MOBILE_NO_CERT").focus();
			});

			//핸드폰 수정 엔터
			$("#MOBILE_NO_CERT").keypress(function(e) {
			  	if (e.which == '13') {
			    	e.preventDefault();
			    	$("#sendCertNo").click();
			    }
			});

			//인증번호 발송 기능 추가
			$("#sendCertNo").click(function(e){
				e.preventDefault();

				if ( !validateStr($("#MOBILE_NO_CERT").val(), 0, 0, "mobile") ) {
					//핸드폰 번호 validation
					alert("휴대폰번호를 정확하게 입력하여 주시기바랍니다.");
					$("#MOBILE_NO_CERT").focus();
					return;
				}

				$.getJSON("/common/kmc/mobileNoCheck.do?RETURN_TYPE=myEdit&TYPE=COM&phoneNo="+$("#MOBILE_NO_CERT").val(), function(result) {
					if(result != null && result != "" ){
						var outDs = result.OUT_DS[0];

						$("#tr_cert").val(outDs.TR_CERT);
						$("#tr_url").val(outDs.TR_URL);

						//KMC인증 (KMC제공)
						openKMCISWindow();
					}
				}).fail(function(jqxhr){
					var response = JSON.parse(jqxhr.responseText);
					alert( response.resultMessage );
					$('#apply_dialog').dialog("close");
				});
			});

			//인증번호 취소 기능 추가
			$("#cancelCert").click(function(e){
				e.preventDefault();
				$("#mobile").show();
				$("#certMobile").hide();
				$("#MOBILE_NO_CERT").val("");
			});


			//cashReceipOnClick(); //현금영수증 발행 관련 - 사용하지 않는 기능
			retrieveMembershipMaster(); //멤버쉽 정보 조회

			initPayInfo(); //CNS Pay에서 상품명에 표시되는 항목 설정

			//수량 선택 기능 추가
			//input[name=value]:not(#spinner1) => input[id^=spinner]
			$("input[id^=spinner]").each(function(index,item){
				var no = index+1;

				var max = 1;
				if(!$(".goods[order_no="+no+"] .sold_out").hasClass("hide")) max = 0;

				$("#"+item.id ).spinner({
		        	max: max,
		        	min: 0,
		        	change: function() {
						//var msg=sizeCheck(no);
						//if(msg!=="" && typeof(msg)!="undefined" && msg!="undefined"){alert(msg); $(this).val(exchangeZeroOne($(this).val())); return;}
		        		//spinnerExec(no);
		        	}
		    	});

				$("#spinner"+no+" ~ .ui-spinner-up"+","+"#spinner"+no+" ~ .ui-spinner-down").click(function(e){

		    		spinnerExec(no);
				});
			});

			//기본 기념품에 대한 값 설정
			if($("[name=mtypeselect]:checked").attr("membership_name").match("기념품")) costArr[0] = basicGiftCost; //만약 기본 로딩 페이지가 기념품이 된 경우에 사용

			$(".choice").click(function(){
				console.log("click choice");
				$(".size_list").slideToggle();
		   });
		}); //ready 종료

		//잔여 상품 개수 조회
		function getGiftList(){
			$.getJSON(getAjaxUrl("BR_RetrieveMemberAndGift","IN_DS,SESSION_DS,IN_GIFT,IN_MEMBERSHIP", "OUT_DS,OUT_GIFT,OUT_MEMBERSHIP") + "&IN_MEMBERSHIP.SYSTEM_TYPE_CODE=TWN", function(result) {
				var gift_list = result.OUT_GIFT;
				if(gift_list == null || gift_list.length==0) gift_list = [];

				return gift_list;
			});
		}; //잔여 상품 개수 조회 (getGiftList)

		//가격 계산
		function setTotAmt(){
			sCost=0; //초기화 (가독성을 위해 분리)
			sCost+=costMembership; //가격 합산 : 멤버쉽 가입 비용
			costArr.forEach(function(cost){sCost+=Number(cost)}); //가격 합산 : 기념품
			sCostTxt = numberWithCommas(sCost); //페이지에서 보이는 총 합산 금액
			$("#membershipCost").html(sCostTxt+"원");
			$("#COST").val(sCost); //가격 설정 - 트윈스
			$("#Amt").val(sCost); //가격 설정 - Cns Pay
			console.log("현재 총 결제 예정 금액 : " + sCost + "원");
		}

		//숫자 3자리마다 쉼표 추가하기
		function numberWithCommas(x) {
		    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		}

		//목록 삭제 함수
		function selectDelete(){
			event.preventDefault();

			$(".gift_check:checked").each(function(index, item){
				var no = $(item).data("no"); //코드 간략화를 위한 변수 저장

				$("#GIFT_CNT_"+no).val(0); //개수 초기화
				$("#spinner"+no).val(0) //개수 초기화
				//$("#options"+no).val("") //사이즈 초기화, 제거 : 2022년 2월 16일
				costArr[Number(no)]=0; //가격 초기화
				//window['sCost'+no] = 0; //가격 초기화
				$(item).prop("checked", false); //체크 해제
				$("#select"+no).hide(); //영역 비활성화
			});

			setTotAmt(); //총 결제 금액 재계산

			$("#all_check").prop("checked", false); //전체 체크 해제
		}

		//사이즈 체크
		function sizeCheck(no){
			var msg="";
			var check_size=false; //최초 1회 체크용
			var selector="";

			if(no != null) selector="[order_no]:not([order_no="+no+"])";
			else if(no == null || no == "") selector="[order_no]";

			$(selector).each(function(index,item){
				var item_no=$(item).attr("order_no");
				var is_choice = $("#options"+item_no+" .choice").attr("size_change")!="yes";
				//if($("#spinner"+item_no).val()==1 && $("#options"+item_no).val()==""){
				if($("#options"+item_no) != null && $("#options"+item_no).length > 0 && $("#spinner"+item_no).val()==1 && is_choice){
					if(!check_size) {
						msg = "["+$("[order_no="+item_no+"] .name").html()+"] 사이즈를 선택해주세요.";
 						$(window).scrollTop($("#spinner"+item_no).offset().top-$($("div[gift_code]")[0]).height()-50);
					}
					check_size=true;
				}
			});

			return msg;
		}


function sizeChange(obj){
	var size_name = $(obj).html(); //사이즈명
	var order_no = $(obj).attr("order_no"); //순번
	var tgm_seq = $(obj).attr("tgm_seq"); //고유번호
	var last_cnt = $(obj).attr("last_cnt"); //잔여개수

	if(last_cnt <= 0){
		console.log("선착순이 마감된 상품은 선택할 수 없습니다.");
		return;
	}

	$("#select"+order_no+" td:nth-child(3)").html(size_name); //주문내역 변경
	$("#GIFT_SEQ_"+order_no).val(tgm_seq); //SEQ 변경
	$("#options"+order_no+" .choice").html(size_name); //커스텀 select 태그의 문자열 변경
	$("#options"+order_no+" .choice").attr("size_change", "yes");
	var last_cnt = Number(last_cnt);  //잔여개수
	console.log("last_cnt : " + last_cnt);
	console.log("order_no : " + order_no);
	if(last_cnt == 0){
		$(".goods[order_no="+order_no+"] .sold_out").removeClass("hide");
		$("#options"+order_no+" .choice").css("text-decoration", "line-through");
	} else {
		$(".goods[order_no="+order_no+"] .sold_out").addClass("hide");
		$("#options"+order_no+" .choice").css("text-decoration", "none");
	}

	//셀렉트 박스 닫기
	if($("#options"+order_no+" .size_list").attr("style") == "display: block;") $("#options"+order_no+" .size_list").slideToggle();
}

		//0과 1 교체
		function exchangeZeroOne(val){
			if (val == 0) return 1;
			else if (val == 1) return 0;
		}

		//spinner용 함수
		function spinnerExec(no){
			var val = $( "#spinner"+no ).val();

			$("#GIFT_CNT_"+no).val(val); //개수 초기화
			costArr[Number(no)] = $( "#GIFT_COST_"+no ).val() * val; //가격 초기화
			if(val >= 1) $("#select"+no).show(); //주문 내역 활성화
			else $("#select"+no).hide(); //주문 내역 비활성화
			setTotAmt(); //계산
		}

		//전체 체크
		function all_check(){
			var check = $(event.target).prop("checked");
		   	if(check) $(".goods-table input[type=checkbox]").prop("checked", true);
		   	else $(".goods-table input[type=checkbox]").prop("checked", false);
		}

		//멤버쉽 정보 조회
		function retrieveMembershipMaster(){
			var lmmSeq = $(':radio[name="mtypeselect"]:checked').val(); //value 속성을 TYPE에서 LMM_SEQ로 변경

			$.getJSON(getAjaxUrl("BR_RetrieveMemebershipInfo","IN_DS,SESSION_DS", "OUT_DS") + "&IN_DS.LMM_SEQ=" + lmmSeq, function(result) {
				var outDs = result.OUT_DS[0];
				var cost = Number(outDs.MEMBERSHIP_COST).toLocaleString('en');
				membership_start_date = outDs.MEMBERSHIP_ST_TIMESTAMP.substr(0, 10); //멤버쉽 시작일
				membership_end_date = outDs.MEMBERSHIP_END_TIMESTAMP.substr(0, 10); //멤버쉽 종료일
				membership_recruit_start_date = outDs.MEMBERSHIP_RECRUIT_ST_TIMESTAMP.substr(0, 19); //멤버쉽 시작일 (모집기간)
				membership_recruit_end_date = outDs.MEMBERSHIP_RECRUIT_END_TIMESTAMP.substr(0, 19); //멤버쉽 종료일 (모집기간)
				membership_cancle_deadline_date = outDs.MEMBERSHIP_CANCLE_DEADLINE_TIMESTAMP.substr(0, 19); //멤버쉽 가입 취소 마감일
				var period = membership_start_date + " ~ " + membership_end_date;
				//var lmmSeq = outDs.LMM_SEQ;

				//$("#membershipType").html(outDs.MEMBERSHIP_NAME); //미사용값, LMM_SEQ로 대체
				$("#membershipPeriod").html("유효기간 : " + period + " / 가입비 : " +numberWithCommas(cost) + "원");
				//$("#membershipCost").html(cost + "원"); //영역 변경시 작동하는 기능과 충돌이 발생하여 주석 처리
				$("#LMM_SEQ").val(lmmSeq); //라디오 버튼에서 가져오도록 변경
				//$("#GoodsName").val(outDs.MEMBERSHIP_NAME); //initPayInfo 함수와 충돌하기 때문에 주석 처리
				$("#COST").val(cost);
				//CNS PAY 정보
				$("#Amt").val(outDs.MEMBERSHIP_COST);
			});
		} //retrieveMembershipMaster (멤버쉽 정보 조회) 종료

		//가입 확인 메뉴로 이동
		function MembershipModifyOnclick(){
			if($("#ID").val() == null || $("#ID").val() == ""){
				alert("로그인을 해주세요.");
				$(location).attr("href", "/service/html.ncd?view=/pc_twins/member/login");
				return;
			}else{
					$("#baRq").val('SESSION_DS');
					$("#baRs").val('OUT_DS,OUT_GIFT,OUT_DAY,OUT_PAY');
					$("#actID").val('BR_RetrieveMembershipCheck');
					$("#view").val('/pc_twins/member_vip/joinVcheck');

					$("#regMemberVip").submit();
			}
		} //MembershipModifyOnclick (가입 확인 기능) 종료

		//이미 멤버십에 가입했는지 확인
		function RetrieveMembershipYn(){
			var memberYn = "N";
			$.ajaxSetup({
				async : false
			});
			$.getJSON(getAjaxUrl("BR_AlreadyMembershipCheck","SESSION_DS", "OUT_DS"), function(result) {
				if(result.OUT_DS[0].CNT > 0){
					memberYn = "Y";
				}
			});

			$.ajaxSetup({
				async : true
			});

			return memberYn;
		} //RetrieveMembershipYn (멤버쉽 가입 여부 조회 기능) 종료


		//가입버튼 클릭 (데이터 저장)
		function prefareAddMembership(){
			//연간회원 가입여부 확인
			if(RetrieveMembershipYn()=="Y"){
				layer_open('layer_popup_already');
				return;
			}

			//start : 유효성 검사
				var check_val = check_all_validate();
				if(check_val) return;
				//요구사항 폼 전송전에 한번더 널체크
				if( $('#USER_ID').val() == '' ){
					layer_open('layer_popup_login');
					return;
				}
			//end : 유효성 검사

			initPayInfo(); //CNS Pay에서 상품명에 표시되는 항목 설정
			setTotAmt(); //총 결제 금액 계산

			//var m_check = $("[name=mtypeselect]:checked").attr("membership_name").match("기념품");
			var confirm_msg="";
			//1차기간 : 입력하신 주소로 실물 회원카드 및 선택한 기념품이 배송됩니다. 계속 진행하시겠습니까?
			//2차기간 : 연간회원 가입이 완료됩니다. 계속 진행하시겠습니까?
			/* if(m_check) confirm_msg = "입력하신 집 주소로 기념품이 발송됩니다.";
			else {
				confirm_msg = "입력하신 집 주소로 실물 회원카드가 발송됩니다.";
			} */

			var now_14 = todayDateTimeStr.replaceAll(" ", "").replaceAll("-", "").replaceAll(":", "");
			var cancle_date_14 = membership_cancle_deadline_date.replaceAll(" ", "").replaceAll("-", "").replaceAll(":", "");

			//1차 모집 : 현재 < 가입취소기간
			//2차 모집 : 가입취소 기간 < 현재
			if(now_14 < cancle_date_14){
				confirm_msg = "입력하신 주소로 실물 회원카드 및<br>선택한 기념품이 배송됩니다.";
			} else {
				confirm_msg = "연간회원 가입이 완료됩니다.";
			}

			$("#layer_popup_confirm .msg").html(confirm_msg);
			layer_open('layer_popup_confirm');
		}//prefareAddMembership 종료

		function executeAddMembership(){
			layer_close('layer_popup_confirm');

			//start : 유효성 검사
				var check_val = check_all_validate();
				if(check_val) return;
				//요구사항 폼 전송전에 한번더 널체크
				if( $('#USER_ID').val() == '' ){
					layer_open('layer_popup_login');
					return;
				}
			//end : 유효성 검사

			initPayInfo(); //CNS Pay에서 상품명에 표시되는 항목 설정
			setTotAmt(); //총 결제 금액 계산

			//모집기간 체크, 시간까지 체크할 경우 todayStr 대신에 todayDateTimeStr 사용
			console.log("현재 날짜 : "+todayFormat);
			console.log("모집 시작 기간 : "+membership_recruit_start_date);
			console.log("모집 종료 기간 : "+membership_recruit_end_date);
			//membership_recruit_end_date = "2022-08-31";
			//console.log("모집 종료 기간 (데이터 강제 수정) : "+membership_recruit_end_date);

			//현재 날짜를 14자리 문자열로 조회 (4+2+2+2+2+2)
			$.getJSON(getAjaxUrl("BR_RetrieveCurrDate","IN_DS","OUT_DS"), function(result) {
				var curr_date_14 = result.OUT_DS[0].CURR_DATETIME.replaceAll(" ","").replaceAll(":","").replaceAll("-","");
				var recruit_start_date_14 = membership_recruit_start_date.replaceAll(" ","").replaceAll(":","").replaceAll("-","");
				var recruit_end_date_14 = membership_recruit_end_date.replaceAll(" ","").replaceAll(":","").replaceAll("-","");

				//임시
				//운영에서의 테스트를 위한 강제 성공 처리
				if(curr_date_14 >= recruit_start_date_14 && curr_date_14 <= recruit_end_date_14){
				//if(true){
					//결제전
					$("#PayMethod").val($(':radio[name="payselect"]:checked').val());
					$("#PAY_TYPE_CODE").val($(':radio[name="payselect"]:checked').val());
					$("#PAY_COMPLT_YN").val("N");

					//결제모듈태우기
					var formInput = $("#reqCnsPayForm").serialize();

					var randomVar = dummy(10); //16자리

					$.getJSON("/common/cnsPay/personalCheck.do?TYPE=COM",formInput, function(result) {
						if(result != null && result != "" ){
							var outDs = result.OUT_DS[0];

							$("#MID").val(outDs.MID);
							$("#Moid").val(outDs.EdiDate+randomVar);
							$("#EdiDate").val(outDs.EdiDate);
							$("#EncryptData").val(outDs.EncryptData);

							cnspay(); //결제 모듈 태우기
						}
					}).fail(function(jqxhr){
						var response = JSON.parse(jqxhr.responseText);
						$("#layer_popup_agree .msg").html(response.resultMessage);
						layer_open('layer_popup_agree');
						return;
					});//$.getJSON 종료
				}else{
					$("#layer_popup_agree .msg").html("모집 기간이 아닙니다.");
					layer_open('layer_popup_agree');
					return;
				}
		    });
		}

		function check_all_validate(){
			var lmm_seq = $(':radio[name="mtypeselect"]:checked').val(); //멤버쉽 고유 번호
			var payselect = $(':radio[name="payselect"]:checked').val(); //결제 방법

			if(lmm_seq=='undefined'||lmm_seq==''||lmm_seq==null){
				$("#layer_popup_alert .msg").html("\"회원 종류\"가 선택되지 않았습니다.");
				layer_open('layer_popup_alert');
				return true;
			}

			var error_check_msg = "";


			error_check_msg = sizeCheck();
			if(error_check_msg != ""){
				console.log('유니폼 사이즈 유효성 검사');
				$("#layer_popup_alert .msg").html(error_check_msg);
				layer_open('layer_popup_alert');
				return true;
			}

			$.ajaxSetup({
		        async: false
		    });
 			error_check_msg = checkSoldOut();
 			$.ajaxSetup({
 		        async: true
 		    });
 			//console.log(error_check_msg);
			if(error_check_msg != ""){
	 		 	console.log("if문");
				$("#layer_popup_alert .msg").html(error_check_msg);
				layer_open('layer_popup_alert');
	 			console.log("if문 끝");
				return true;
			}

			error_check_msg = checkMobile(); //연락처 유효성 검사
			if(error_check_msg != ""){
				$("#layer_popup_alert .msg").html(error_check_msg);
				layer_open('layer_popup_alert');
				return true;
			}
			/* error_check_msg = checkEmail(); //이메일 유효성 검사
			if(error_check_msg != ""){
				console.log('이메일 유효성 검사');
				$("#layer_popup_alert .msg").html(error_check_msg);
				layer_open('layer_popup_alert');
				return true;
			} */
			error_check_msg = checkAddr(); //집 주소 유효성 검사
			if(error_check_msg != ""){
				console.log('집 주소 유효성 검사');
				$("#layer_popup_alert .msg").html(error_check_msg);
				layer_open('layer_popup_alert');
				return true;
			}
			error_check_msg = checkParentName(); //대리인 체크
			if(error_check_msg != ""){
				$("#layer_popup_alert .msg").html(error_check_msg);
				layer_open('layer_popup_alert');
				return true;
			}
			controlSelector('sms'); //SMS 동의에 대한 유효성 검사
			controlSelector('email'); //이메일 동의에 대한 유효성 검사
			controlSelector('payment'); //결제 동의에 대한 유효성 검사
			//법정대리인 동의에 대한 유효성 검사
			if(childFlag=="Y"){
				controlSelector('parent');
				if($("#PARENT_AGREE_YN").val()!="Y"){
					$("#layer_popup_agree .msg").html("법정대리인 동의가 필요합니다.");
					layer_open('layer_popup_agree');
					return true;
				}
			}
			//결제 방법에 대한 유효성 검사
			if(payselect=='undefined'||payselect==''||payselect==null){
				$("#layer_popup_alert .msg").html("\"결제 방법\"이 선택되지 않았습니다.");
				layer_open('layer_popup_alert');
				return true;
			}
			//결제 동의에 대한 유효성 검사
			if($("#PAY_AGREE_YN").val()!="Y"){
				$("#layer_popup_agree .msg").html("결제 진행에 대한  동의가 필요합니다.");
				layer_open('layer_popup_agree');
				return true;
			}

			//사이즈 체크
			var msg=sizeCheck();
			if(msg!=="" && typeof(msg)!="undefined" && msg!="undefined"){
				$("#layer_popup_alert .msg").html(msg);
				layer_open('layer_popup_alert');
				return true;
			}
		}//check_all_validate 종료

		//설정한 모든 태그에 대한 유효성 검사
		function checkHasErr(name, check){
			$(name).each(function(idx){
				if ( $(this).hasClass("err") ){
					$(this).focus();
					check = true;
				}
			});
		}

		//이메일/SMS 동의 체크박스에 대한 기능 추가
		function controlChkBox() {
			/* if ($("#agree01").is(":checked")) { //sms 수신 동의
				$("#TWN_SMS_RCV_YN").val("Y");
			}else{
				$("#TWN_SMS_RCV_YN").val("N");
			}
			if($("#agree03").is(":checked")) { //email 수신 동의
				$("#TWN_EMAIL_RCV_YN").val("Y");
			}else{
				$("#TWN_EMAIL_RCV_YN").val("N");
			} */
		}

		//Sold Out 유효성 검사
		function checkSoldOut(){
			var isGiftCompleted = false; //선착순이 종료된 상품이 존재하는지에 대한 여부
			var soldOutGiftName = "";
			$.getJSON(getAjaxUrl("BR_RetrieveMemberAndGift","IN_DS,SESSION_DS,IN_GIFT,IN_MEMBERSHIP", "OUT_DS,OUT_GIFT,OUT_MEMBERSHIP") + "&IN_MEMBERSHIP.SYSTEM_TYPE_CODE=TWN", function(result) {
				var gift_list = result.OUT_GIFT; //상품 목록
				var uniform_list = []; //유니폼 체크용
				//console.log("gift_list.length : " + gift_list.length);
				if(gift_list != null && gift_list.length>0){
					var gift_list_length = gift_list.length;
					var order_no = 1; //순번
					for(var i=0;i<gift_list_length;i++){
						var cnt = Number($("#GIFT_CNT_"+order_no).val()); //해당 상품에 대해서 선택한 개수
						/* console.log("gift_list[i].TGM_SEQ : " + gift_list[i].TGM_SEQ);
						console.log("gift_list[i].GIFT_NAME : " + gift_list[i].GIFT_NAME);
						console.log("gift_list[i].ATTRIBUTE2 : " + gift_list[i].ATTRIBUTE2);
						console.log("GIFT_SEQ_"+order_no+" : " + $("#GIFT_SEQ_"+order_no).val()); */
						if($("#GIFT_SEQ_"+order_no).val() == gift_list[i].TGM_SEQ){

							if(cnt>0 && Number(gift_list[i].ATTRIBUTE2)==0){
								isGiftCompleted = true;
								console.log("선착순이 종료된 상품 존재 : "+gift_list[i].ATTRIBUTE1); //로그
								soldOutGiftName = gift_list[i].ATTRIBUTE1;
								$("#spinner"+order_no).val(0);
								spinnerExec(order_no); //주문 내역 변경 및 결제 금액 재계산
								$(".goods[order_no="+order_no+"] .sold_out").removeClass("hide");
								//break;
							}
							order_no++;
						}

						//2023년도 기준
						if(gift_list[i].GIFT_CODE.indexOf("2023U") > -1){
							uniform_list.push(gift_list[i]);
						}

					} //for 종료

					//2023년도 기준
					if(uniform_list.length > 0){
						var uniform_list_length = uniform_list.length;
						for(var j=0;j<uniform_list_length;j++){
							//$("option[value="+uniform_list[j].TGM_SEQ+"]").attr("last_cnt", uniform_list[j].ATTRIBUTE2); //잔여 개수 변경
							//$(".goods_item[gift_code*=2023U] select").change();
							var target = ".goods[gift_code*=2023U] .size_list li[tgm_seq="+uniform_list[j].TGM_SEQ+"]";
							var last_cnt = Number(uniform_list[j].ATTRIBUTE2);
							$(target).attr("last_cnt", last_cnt);
							if(Number(last_cnt) <= 0){
								$(target).addClass("soldout");
							}
						}
						var my_choice_seq = $("#GIFT_SEQ_"+$(".goods[gift_code*=2023U]").attr("order_no")).val(); //내가 기존에 선택한 사이즈의 seq 값
						sizeChange($($(".goods[gift_code*=2023U] .size_list li[tgm_seq="+my_choice_seq+"]")));
					}
					/* if(uniform_list.length > 0){
						var uniform_list_length = uniform_list.length;
						for(var j=0;j<uniform_list_length;j++){
							$("option[value="+uniform_list[j].TGM_SEQ+"]").attr("last_cnt", uniform_list[j].ATTRIBUTE2); //잔여 개수 변경
						}
						$(".goods[gift_code*=2023U] select").change(); //현재 선택중인 유니폼 사이즈에 대한 sold out 표시 변경
					} */
				}
			});

			if(isGiftCompleted == true) {
				return "선착순이 종료된 상품이 존재합니다.";

			}else{
				return "";
			}
		}

		//이메일 유효성 검사
		function checkEmail() {
				/* var email = $("#EMAIL_ADDR").val();
				var regEmail = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
				if (!email) {
					return "\"이메일\"이 입력되지 않았습니다.";
				} else if (!regEmail.test(email)) {
					return "\"이메일\"이 형식에 맞지 않습니다";
				} else {
					return "";
				} */
			}

		//집 주소에 대한 유효성 검사
		function checkAddr() {
			var zipCode = $("#ZIPCODE").val();
			var addr = $("#ADDRESS").val();
			var addrDetail = $("#ADDRESS_DETAIL").val();

			if (!zipCode) {
				return "\"주소\"가 입력되지 않았습니다.";
			}else{
				return "";
			}
			if (!addr) {
				return "\"주소\"가 입력되지 않았습니다.";
			}else{
				return "";
			}
			if (!addrDetail) {
				return "\"주소\"가 입력되지 않았습니다.";
			}else{
				return "";
			}
		}

		//대리인 (PARENT_NAME) 체크
		function checkParentName() {
			if (($("#PARENT_NAME").val()==null || $("#PARENT_NAME").val()=="") && ageCheck < 13) {
				return "\"보호자 이름\"이 입력되지 않았습니다.";
			} else {
				return "";
			}
		}

		//목록 - hide
		function initTr(){
			for(var i=1; i<11; i++){
				$("#select"+i).hide();
			}
		}

		//목록 - show
		function setTr(no){
			initTr();
			var trNum='';
			no = no*1;
			for(var i=1; i<(no+1); i++){
				if(i<10){
					trNum = '0'+i;
				}else{
					trNum = i;
				}
				$("#select"+trNum).attr("style", "");
			}
		}

		//결제 동의 체크박스에 대한 기능 추가
		function payAgreeOnclick(){
			if($("#agree13").is(":checked")) {
				$("#PAY_AGREE_YN").val("Y");
				$("#cashAgreeNull").attr("style","display:none");
			}else{
				$("#PAY_AGREE_YN").val("N");
				$("#cashAgreeNull").attr("style", "display:true");
			}
		}

		//CNS Pay에서 상품명에 표시되는 항목 설정
		function initPayInfo(){

			var membershipTypeObject = $("[name=mtypeselect]:checked");
			var front = membershipTypeObject.attr("membership_name"); //front 생성
			front = front.replace(/\s/gi, ""); //공백 제거
			//front = front.replace(/이/gi, ""); //"엘린이"에서 "이" 제거
			var back=""; //back 생성

			var check = membershipTypeObject.attr("membership_name").match("기념품") != null ? true : false;
			if(check){
				$("div[gift_code]").each(function(index, item){
					var no = index+1; //순서번호
					var count = $("#GIFT_CNT_"+no).val(); //개수
					var str = "+추";

					if(index > 0) str+=index;
					if(index == 0 || count == 0) str=""; //개수가 0이면 초기화

					back += str; //상품명 연결
				});
			}//if 종료

			$("#GoodsName").val(front+back);

			console.log(front+back);
		}

		/**
		cnspay	를 통해 결제를 시작합니다.
		*/
		function cnspay() {
			var payForm		= document.reqCnsPayForm;

			goPay(payForm);
		} //cnspay 종료

		/**
		최종 결제 요청하는 함수
		*/
		function cnspaySubmit(){
			if(typeof(p_win) !== "undefined" && p_win != null) {
				p_win.close();
			}

			var MEMBERSHIP_TYPE = $('input:radio[name=mtypeselect]:checked').parent().attr("membership_type");
			$("#MEMBERSHIP_TYPE").val(MEMBERSHIP_TYPE);

			var formInput = $("#reqCnsPayForm").serialize();
			$.getJSON("/common/cnsPay/personalCheckResult.do",formInput, function(result) {
				if(result != null && result != "" ){
					var outDs = result.OUT_DS[0];

					if (outDs.membership_over_result == 'over') {
						alert("모집인원이 초과되었습니다.");
						location.href = "/service/html.ncd?view=/pc_twins/member_vip/joinV0";
						return;
					}

					if(outDs.PAYCHECK == "success"){
						$("#ORDER_NO").val(outDs.TID); //결재아이디
						$("#PAY_COMPLT_YN").val("Y");
						/* CREDIT_AGREE_YN 는 결제모듈에서 추가/수정 */

						$("#CASH_RECEIPT_YN").val($(':radio[name="receiptYN"]:checked').val());
						$("#ENTER_STATUS").val("P");

						//개수가 0개인 상품의 고유번호를 제거
						$("[id^=GIFT_SEQ_]").each(function(idx, item){
							var no = $(item).attr("order");
							if($("#GIFT_CNT_"+no).val()==0) $(item).val("");
						});

						// 상품 목록 추가
						$("[id^=GIFT_CNT_]").each(function(idx, item){
							var cnt = Number($(item).val());
							if(cnt>0){
								$("#regMemberVip").append("<input type=\"hidden\" name=\"IN_GIFT.TGM_SEQ\" value=\""+$("#GIFT_SEQ_"+(idx+1)).val()+"\"/>")
							}
						});

						//$("#regMemberVip").submit(); // action : /web/membership/vip/3
						var regMemberVip = $("#regMemberVip").serialize();

						$.getJSON("/web/membership/vip/regist", regMemberVip, function(result){

							console.log("성공")

							location.href = "/web/membership/vip/3";

							}).fail(function(jqxhr){
								var response = JSON.parse(jqxhr.responseText);
								console.log(jqxhr);
								console.log(response);
								console.log("실패");
								alert( response.resultMessage );

								//전체취소.
								canclePay();
							});
					}else{
						alert(outDs.RESULTMSG);
						p_win.close();
					}
				}
			}).fail(function(jqxhr){
				var response = JSON.parse(jqxhr.responseText);
				alert( response.resultMessage );
				p_win.close();
			});
		} //cnspaySubmit 종료

		/**
		결제 취소시 호출하게 되는 함수
		*/
		function cnspayClose(){
			if(typeof(p_win) !== "undefined" && p_win != null) {
				p_win.close();
			}
			alert("결제가 취소 되었습니다.");
		} //cnspayClose

		//결제 취소 함수
		function canclePay(){
			var payType = $("[name=payselect]:checked").val();
			$("#cancelRequest #TID").val($("#ORDER_NO").val());
			if(payType == "SMILEPAY"){
				$("#cancelRequest #MID").val("KCLGT0001m");
			}else{
				$("#cancelRequest #MID").val("CCLGT0001m");
			}

			$("#cancelRequest #CancelAmt").val($("#Amt").val());
			var formInput = $("#cancelRequest").serialize();

			//cnsPay 결제취소 요청
			$.getJSON("/common/cnsPay/cnspayLiteCancelRequest.do?TYPE=COM",formInput, function(result) {
				if(result != null && result != "" ){
					var outDs = result.OUT_DS[0];
					//성공코드
					if(outDs.RESULTCODE == '2001'){
						//결재취소 (APPLY_YN = N)
						/*$("#baRq").val('IN_DS,SESSION_DS');
						$("#baRs").val('');
						$("#actID").val('BR_CancelMembershipAndGoods');
						$("#view").val('/pc_twins/member_vip/joinV0');
						$("#regMemberVip").submit();*/

						$.getJSON(getAjaxUrl("BR_RetrieveMembershipDetailLog","SESSION_DS", "OUT_DS,PAGING_OUTPUT"), function(result) {
							var OUT_DS = result.OUT_DS;
							var tmd_seq = 0;
							if(OUT_DS != null && OUT_DS.length>0){
								var length = OUT_DS.length;
								var select_lmm_seq = $("#LMM_SEQ").val();
								for(var i=0; i<length; i++){
									if(OUT_DS[i].LMM_SEQ == select_lmm_seq){
										tmd_seq = OUT_DS[i].TMD_SEQ;
										break;
									}
								}
								$.getJSON(getAjaxUrl("BR_CancelMembershipAndGoods","IN_DS,SESSION_DS", "")+"&IN_DS.TMD_SEQ="+tmd_seq, function(result) {
									alert("취소 처리되었습니다.");
									location.href = '/web/membership/vip/0';
/* 									location.reload(true); */
								}).fail(function(jqxhr){
									var response = JSON.parse(jqxhr.responseText);
									alert( response.resultMessage );
									$('#apply_dialog').dialog("close");
								});
							} else {
								alert("오류가 발생했습니다.");
								console.log("가입 이력 조회 오류");
							}
						});
					}else{
						alert(outDs.RESULTMSG);
					}
				}
			}).fail(function(jqxhr){

				var response = JSON.parse(jqxhr.responseText);
				alert( response.resultMessage );
				$('#apply_dialog').dialog("close");
			});
		} //가입취소 (canclePay)


		//KMC 인증(KMC제공)
		function openKMCISWindow(){
			/*var UserAgent = navigator.userAgent;
		    //모바일 접근 체크
		    // 모바일일 경우 (변동사항 있을경우 추가 필요)
		    if (UserAgent.match(/iPhone|iPod|Android|Windows CE|BlackBerry|Symbian|Windows Phone|webOS|Opera Mini|Opera Mobi|POLARIS|IEMobile|lgtelecom|nokia|SonyEricsson/i) != null || UserAgent.match(/LG|SAMSUNG|Samsung/) != null) {
		    	document.reqKMCISForm.target = '';
		    } else {
				// 모바일이 아닐 경우
		   		KMCIS_window = window.open('', 'KMCISWindow', 'width=425, height=551, resizable=0, scrollbars=no, status=0, titlebar=0, toolbar=0, left=435, top=250' );
		   		if(KMCIS_window == null){
		 			alert(" ※ 윈도우 XP SP2 또는 인터넷 익스플로러 7 사용자일 경우에는 \n    화면 상단에 있는 팝업 차단 알림줄을 클릭하여 팝업을 허용해 주시기 바랍니다. \n\n※ MSN,야후,구글 팝업 차단 툴바가 설치된 경우 팝업허용을 해주시기 바랍니다.");
		   		}

		   		document.reqKMCISForm.target = 'KMCISWindow';
			}

			document.reqKMCISForm.action = 'https://www.kmcert.com/ics/smsAuth/smsAuthW_10.jsp';
			document.reqKMCISForm.submit();*/

			// 해쉬 추가
			if(history.pushState) {
			    history.pushState(null, null, '#kmc');
			}
			else {
			    location.hash = '#kmc';
			}
			$("body").append('<iframe id="kmcFrame" name="kmcFrame" class="exFrame"style="height:100%; width:100%"></iframe>');

			document.reqKMCISForm.target = 'kmcFrame';
			$("#kmcFrame").show();
			$('.wrapper').hide();

			setTimeout(function() {
				document.reqKMCISForm.action = 'https://www.kmcert.com/ics/smsAuth/smsAuthW_10.jsp';
				document.reqKMCISForm.submit();
			},1000);
		}

		//KMC 인증 닫기
		function closeKMCISWindow(mobileNo){
			$("#MOBILE_NO").val(mobileNo);
			$("#BuyerTel").val(mobileNo);

			$("#mobile").show();
			$("#certMobile").hide();

			$("#kmcFrame").hide();
			$('.wrapper').show();
		}

		//다음 API 닫기
		function closeDaumPostcode() {
		// iframe을 넣은 element를 안보이게 한다.
			element_layer.style.display = 'none';
		}

		//난수 반환 함수 (실제 난수 생성은 rand 함수가 진행)
		function dummy(size){
		 var result = "";
		 if(!size) size = 10;
		 //0~9 : 48~57
		 //a~z : 97~122
		 //A~Z : 65~90
		 for(var i=0;i<size;i++){
		  var kind = rand(1,3);
		  switch(kind){
		   case 1:
		    result += String.fromCharCode(rand(48,57));
		    break;
		   case 2:
		    result += String.fromCharCode(rand(65,90));
		    break;
		   default:
		    result += String.fromCharCode(rand(97,122));
		    break;
		  }
		 }
		 return result;
		}

		//난수 생성 함수, 예시 : rand(1,3)
		function rand(p_start,p_end){
		 var v_result = null;
		 var v_size = p_end - p_start + 1;

		 if(p_start < 0 || p_end < 0) return v_result;
		 if(v_size < 2) return v_result;

		 v_result = p_start + parseInt(Math.random() * v_size);

		 return v_result;
		}

		//숫자만 입력되게 하기
		function showKeyCode(event) {
			event = event || window.event;
			var keyID = (event.which) ? event.which : event.keyCode;
			if( ( keyID >=48 && keyID <= 57 ) || ( keyID >=96 && keyID <= 105 ) || (keyID == 8) )
			{
				return;
			}
			else
			{
				return false;
			}
		}

		function layer_open(id){
			$("#"+id).css("display", "flex");
		}
		function controlSelector(type) {
			//sms 수신 동의
			if(type == 'sms'){
				if ($("#agree_sms").is(":checked")) {
					$("#TWN_SMS_RCV_YN").val("Y");
				}else{
					$("#TWN_SMS_RCV_YN").val("N");
				}
			}

			//email 수신 동의
			if(type == 'email'){
				if($("#agree_email").is(":checked")) {
					$("#TWN_EMAIL_RCV_YN").val("Y");
				}else{
					$("#TWN_EMAIL_RCV_YN").val("N");
				}
			}

			//결제 동의
			if(type == 'payment'){
//				if($("#agree_payment1").is(":checked") && $("#agree_payment2").is(":checked")){
				if($("#agree_payment1").is(":checked")){
					$("#PAY_AGREE_YN").val("Y");
				}else{
					$("#PAY_AGREE_YN").val("N");
				}
			}

			//법정대리인 동의
			if(type == 'parent'){
				if($("#agree_parent").is(":checked")){
					$("#PARENT_AGREE_YN").val("Y");
				}else{
					$("#PARENT_AGREE_YN").val("N");
				}
			}
		}

		function checkMobile() {
			var mobile = $("#MOBILE_NO").val();
			if (!mobile) {
				return "\"휴대폰 번호\"가 입력되지 않았습니다.";
			} else {
				return "";
			}
		}

		//연락처 인증 보내기
		function sendCertNo(){
			event.preventDefault();

			if ( !validateStr($("#MOBILE_NO_CERT").val(), 0, 0, "mobile") ) {
				//핸드폰 번호 validation
				alert("휴대폰번호를 정확하게 입력하여 주시기바랍니다.");
				$("#MOBILE_NO_CERT").focus();
				//$("#layer_popup_alert .msg").html("휴대폰번호를 정확하게 입력하여 주시기바랍니다.");
				//layer_open('layer_popup_alert');
				//$("#MOBILE_NO_CERT").focus();
				return;
			}

			$.getJSON("/common/kmc/mobileNoCheck.do?RETURN_TYPE=myEdit&TYPE=COM&phoneNo="+$("#MOBILE_NO_CERT").val(), function(result) {
				if(result != null && result != "" ){
					var outDs = result.OUT_DS[0];

					$("#tr_cert").val(outDs.TR_CERT);
					$("#tr_url").val(outDs.TR_URL);

					//KMC인증 (KMC제공)
					openKMCISWindow();
				}
			}).fail(function(jqxhr){
				var response = JSON.parse(jqxhr.responseText);
				alert( response.resultMessage );
			});
		}

		//연락처 인증 영역 열기
		function prefare_modify_mobile(){
			event.preventDefault();

			$("#mobile").hide();
			$("#certMobile").show();
		}

		//연락처 인증 영역 닫기
		function cancle_modify_mobile(){
			event.preventDefault();

			$("#mobile").show();
			$("#certMobile").hide();
		}

		function openSizeDialog(GIFT_CODE){
			$('.size_dialog').html("<img id='uniform_dialog_img' src=\"/images/member/img_goods_2023_"+GIFT_CODE+"_size.jpg\"/>");
			$('.size_dialog').dialog({
			    //title: '다이얼로그 제목', // 다이얼로그 제목
			    modal: true,        // 배경색 어둡게 true, false
			    width: '100%',       // 넓이
			    height: '700',      // 높이
			    resizeable : false,    // 사이즈 조절가능 여부
			    //show : 'slide',     // 나타날 때 사용하는 애니메이션 (slide, explode, blind)
			    //hide : 'blind',      // 사라질때 사용하는 애니메이션
			    "position" : {
			        //my	: "center",
			        //at	: "center",
			        //of	: window,
			        //of	: "#INI_mainModalDialog",
			    },buttons: {
			        /*"확인":function() {
			            $(this).dialog("close"); //dialog 닫기 메소드 실행

			        },
			        "취소":function() {
			          $(this).dialog("close"); //dialog 닫기 메소드 실행
			      },*/

			    },
			    open: function() {
			    	//console.log(GIFT_CODE);
			        //dialog.innerHTML = '<p class="ttt"> 이름을 적으세요 </p><br><input type="text" id="TEST" value="TEST">';
			    	//$('.size_dialog').html("<img src=/images/member/img_goods_2023_"+GIFT_CODE+"_size.jpg");
			        //$(this).closest('.ini-ui-dialog').find('.ini-ui-dialog-buttonpane').hide();
			        //$(this).dialog("widget").find(;
			        //$(".ui-dialog-buttonpane").find('button:contains("Cancel")').addClass('cancelButtonClass');
			    },
			});
		}

		</script>
</body>
</html>
```
